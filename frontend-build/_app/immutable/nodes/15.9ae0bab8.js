import{s as Se,n as ne,c as ze,o as Le}from"../chunks/scheduler.27fe8299.js";import{S as qe,i as Ae,s as k,g as c,m as z,D as Be,f as i,c as I,h as u,j as p,n as L,x as Y,k as f,a as P,y as s,o as H,z as Re,A as Fe}from"../chunks/index.e0a53316.js";import{e as Ee}from"../chunks/each.d148e7a3.js";import{p as He}from"../chunks/stores.d2bbad10.js";import{g as Pe}from"../chunks/navigation.985c25e8.js";import{d as ke}from"../chunks/api.5fae4f57.js";function Ie(a,e,t){const l=a.slice();return l[12]=e[t],l}function Ve(a){let e,t=a[5]?"‚è≥ Releasing...":"‚úÖ Release Results",l,h,m;return{c(){e=c("button"),l=z(t),this.h()},l(n){e=u(n,"BUTTON",{class:!0});var v=p(e);l=L(v,t),v.forEach(i),this.h()},h(){f(e,"class","bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold"),e.disabled=a[5]},m(n,v){P(n,e,v),s(e,l),h||(m=Re(e,"click",a[6]),h=!0)},p(n,v){v&32&&t!==(t=n[5]?"‚è≥ Releasing...":"‚úÖ Release Results")&&H(l,t),v&32&&(e.disabled=n[5])},d(n){n&&i(e),h=!1,m()}}}function Ce(a){let e,t,l,h="‚ö†Ô∏è",m,n,v;return{c(){e=c("div"),t=c("div"),l=c("div"),l.textContent=h,m=k(),n=c("div"),v=z(a[4]),this.h()},l(r){e=u(r,"DIV",{class:!0});var o=p(e);t=u(o,"DIV",{class:!0});var b=p(t);l=u(b,"DIV",{class:!0,"data-svelte-h":!0}),Y(l)!=="svelte-1lytrla"&&(l.textContent=h),m=I(b),n=u(b,"DIV",{class:!0});var d=p(n);v=L(d,a[4]),d.forEach(i),b.forEach(i),o.forEach(i),this.h()},h(){f(l,"class","text-red-400"),f(n,"class","ml-3 text-red-700"),f(t,"class","flex"),f(e,"class","bg-red-50 border-l-4 border-red-400 p-4 mb-6 rounded-r-lg")},m(r,o){P(r,e,o),s(e,t),s(t,l),s(t,m),s(t,n),s(n,v)},p(r,o){o&16&&H(v,r[4])},d(r){r&&i(e)}}}function je(a){let e,t,l,h='<tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Student</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Score</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Submitted</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Reviewed</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th></tr>',m,n,v=Ee(a[0]),r=[];for(let o=0;o<v.length;o+=1)r[o]=Te(Ie(a,v,o));return{c(){e=c("div"),t=c("table"),l=c("thead"),l.innerHTML=h,m=k(),n=c("tbody");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=u(o,"DIV",{class:!0});var b=p(e);t=u(b,"TABLE",{class:!0});var d=p(t);l=u(d,"THEAD",{class:!0,"data-svelte-h":!0}),Y(l)!=="svelte-42dgqd"&&(l.innerHTML=h),m=I(d),n=u(d,"TBODY",{class:!0});var _=p(n);for(let g=0;g<r.length;g+=1)r[g].l(_);_.forEach(i),d.forEach(i),b.forEach(i),this.h()},h(){f(l,"class","bg-gray-50"),f(n,"class","bg-white divide-y divide-gray-200"),f(t,"class","min-w-full divide-y divide-gray-200"),f(e,"class","overflow-x-auto")},m(o,b){P(o,e,b),s(e,t),s(t,l),s(t,m),s(t,n);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(n,null)},p(o,b){if(b&129){v=Ee(o[0]);let d;for(d=0;d<v.length;d+=1){const _=Ie(o,v,d);r[d]?r[d].p(_,b):(r[d]=Te(_),r[d].c(),r[d].m(n,null))}for(;d<r.length;d+=1)r[d].d(1);r.length=v.length}},d(o){o&&i(e),Fe(r,o)}}}function Me(a){let e,t='<div class="text-6xl mb-4">üì≠</div> <h3 class="text-xl font-semibold text-gray-900 mb-2">No Submissions Yet</h3> <p class="text-gray-600">Students haven&#39;t submitted this quiz yet.</p>';return{c(){e=c("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-10aua9e"&&(e.innerHTML=t),this.h()},h(){f(e,"class","text-center py-12")},m(l,h){P(l,e,h)},p:ne,d(l){l&&i(e)}}}function Ne(a){let e,t='<div class="text-4xl mb-4">‚è≥</div> <p class="text-gray-600">Loading submissions...</p>';return{c(){e=c("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1vsk60r"&&(e.innerHTML=t),this.h()},h(){f(e,"class","text-center py-12")},m(l,h){P(l,e,h)},p:ne,d(l){l&&i(e)}}}function Oe(a){let e,t="N/A";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-14vu2te"&&(e.textContent=t),this.h()},h(){f(e,"class","text-sm text-gray-500")},m(l,h){P(l,e,h)},p:ne,d(l){l&&i(e)}}}function Ue(a){let e,t=a[12].final_score.toFixed(1)+"",l,h,m=a[12].total_possible.toFixed(1)+"",n,v,r,o=(a[12].final_score/a[12].total_possible*100).toFixed(1)+"",b,d;return{c(){e=c("div"),l=z(t),h=z("/"),n=z(m),v=k(),r=c("div"),b=z(o),d=z("%"),this.h()},l(_){e=u(_,"DIV",{class:!0});var g=p(e);l=L(g,t),h=L(g,"/"),n=L(g,m),g.forEach(i),v=I(_),r=u(_,"DIV",{class:!0});var q=p(r);b=L(q,o),d=L(q,"%"),q.forEach(i),this.h()},h(){f(e,"class","text-lg font-bold text-blue-600"),f(r,"class","text-xs text-gray-500")},m(_,g){P(_,e,g),s(e,l),s(e,h),s(e,n),P(_,v,g),P(_,r,g),s(r,b),s(r,d)},p(_,g){g&1&&t!==(t=_[12].final_score.toFixed(1)+"")&&H(l,t),g&1&&m!==(m=_[12].total_possible.toFixed(1)+"")&&H(n,m),g&1&&o!==(o=(_[12].final_score/_[12].total_possible*100).toFixed(1)+"")&&H(b,o)},d(_){_&&(i(e),i(v),i(r))}}}function Te(a){let e,t,l,h=a[12].student_name+"",m,n,v,r=a[12].student_username+"",o,b,d,_,g,q=new Date(a[12].submitted_at).toLocaleString()+"",x,F,D,A,G=a[12].teacher_reviewed?"‚úÖ Reviewed":"‚è≥ Pending",J,j,N,R,C,O="üîç Review",re,se,K;function Z(V,w){return V[12].final_score!==void 0&&V[12].total_possible!==void 0?Ue:Oe}let W=Z(a),S=W(a);function X(){return a[8](a[12])}return{c(){e=c("tr"),t=c("td"),l=c("div"),m=z(h),n=k(),v=c("div"),o=z(r),b=k(),d=c("td"),S.c(),_=k(),g=c("td"),x=z(q),F=k(),D=c("td"),A=c("span"),J=z(G),N=k(),R=c("td"),C=c("button"),C.textContent=O,re=k(),this.h()},l(V){e=u(V,"TR",{class:!0});var w=p(e);t=u(w,"TD",{class:!0});var $=p(t);l=u($,"DIV",{class:!0});var U=p(l);m=L(U,h),U.forEach(i),n=I($),v=u($,"DIV",{class:!0});var ee=p(v);o=L(ee,r),ee.forEach(i),$.forEach(i),b=I(w),d=u(w,"TD",{class:!0});var le=p(d);S.l(le),le.forEach(i),_=I(w),g=u(w,"TD",{class:!0});var ae=p(g);x=L(ae,q),ae.forEach(i),F=I(w),D=u(w,"TD",{class:!0});var ie=p(D);A=u(ie,"SPAN",{class:!0});var Q=p(A);J=L(Q,G),Q.forEach(i),ie.forEach(i),N=I(w),R=u(w,"TD",{class:!0});var E=p(R);C=u(E,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(C)!=="svelte-j1o1um"&&(C.textContent=O),E.forEach(i),re=I(w),w.forEach(i),this.h()},h(){f(l,"class","text-sm font-medium text-gray-900"),f(v,"class","text-sm text-gray-500"),f(t,"class","px-6 py-4 whitespace-nowrap"),f(d,"class","px-6 py-4 whitespace-nowrap"),f(g,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),f(A,"class",j="px-2 py-1 text-xs font-semibold rounded-full "+(a[12].teacher_reviewed?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800")),f(D,"class","px-6 py-4 whitespace-nowrap"),f(C,"class","bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"),f(R,"class","px-6 py-4 whitespace-nowrap text-sm"),f(e,"class","hover:bg-gray-50")},m(V,w){P(V,e,w),s(e,t),s(t,l),s(l,m),s(t,n),s(t,v),s(v,o),s(e,b),s(e,d),S.m(d,null),s(e,_),s(e,g),s(g,x),s(e,F),s(e,D),s(D,A),s(A,J),s(e,N),s(e,R),s(R,C),s(e,re),se||(K=Re(C,"click",X),se=!0)},p(V,w){a=V,w&1&&h!==(h=a[12].student_name+"")&&H(m,h),w&1&&r!==(r=a[12].student_username+"")&&H(o,r),W===(W=Z(a))&&S?S.p(a,w):(S.d(1),S=W(a),S&&(S.c(),S.m(d,null))),w&1&&q!==(q=new Date(a[12].submitted_at).toLocaleString()+"")&&H(x,q),w&1&&G!==(G=a[12].teacher_reviewed?"‚úÖ Reviewed":"‚è≥ Pending")&&H(J,G),w&1&&j!==(j="px-2 py-1 text-xs font-semibold rounded-full "+(a[12].teacher_reviewed?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"))&&f(A,"class",j)},d(V){V&&i(e),S.d(),se=!1,K()}}}function Qe(a){let e,t,l,h,m,n,v,r,o,b,d,_,g="Review and grade student submissions",q,x,F,D,A="‚Üê Back",G,J,j,N,R,C,O,re="Total Submissions",se,K,Z=a[0].length+"",W,S,X,V,w="Results Status",$,U,ee=a[2]?"‚úÖ Released":"‚è≥ Pending",le,ae,ie,Q;document.title=e="Quiz Submissions - "+a[1];let E=!a[2]&&a[0].length>0&&Ve(a),T=a[4]&&Ce(a);function pe(y,B){return y[3]?Ne:y[0].length===0?Me:je}let oe=pe(a),M=oe(a);return{c(){t=k(),l=c("div"),h=c("div"),m=c("div"),n=c("div"),v=c("div"),r=c("h1"),o=z("üìù "),b=z(a[1]),d=k(),_=c("p"),_.textContent=g,q=k(),x=c("div"),E&&E.c(),F=k(),D=c("a"),D.textContent=A,G=k(),T&&T.c(),J=k(),j=c("div"),N=c("div"),R=c("div"),C=c("div"),O=c("div"),O.textContent=re,se=k(),K=c("div"),W=z(Z),S=k(),X=c("div"),V=c("div"),V.textContent=w,$=k(),U=c("div"),le=z(ee),ie=k(),Q=c("div"),M.c(),this.h()},l(y){Be("svelte-d2cvd7",document.head).forEach(i),t=I(y),l=u(y,"DIV",{class:!0});var me=p(l);h=u(me,"DIV",{class:!0});var te=p(h);m=u(te,"DIV",{class:!0});var be=p(m);n=u(be,"DIV",{class:!0});var de=p(n);v=u(de,"DIV",{});var ce=p(v);r=u(ce,"H1",{class:!0});var _e=p(r);o=L(_e,"üìù "),b=L(_e,a[1]),_e.forEach(i),d=I(ce),_=u(ce,"P",{class:!0,"data-svelte-h":!0}),Y(_)!=="svelte-octs3n"&&(_.textContent=g),ce.forEach(i),q=I(de),x=u(de,"DIV",{class:!0});var ue=p(x);E&&E.l(ue),F=I(ue),D=u(ue,"A",{href:!0,class:!0,"data-svelte-h":!0}),Y(D)!=="svelte-1tjiqzr"&&(D.textContent=A),ue.forEach(i),de.forEach(i),be.forEach(i),G=I(te),T&&T.l(te),J=I(te),j=u(te,"DIV",{class:!0});var ge=p(j);N=u(ge,"DIV",{class:!0});var xe=p(N);R=u(xe,"DIV",{class:!0});var fe=p(R);C=u(fe,"DIV",{});var he=p(C);O=u(he,"DIV",{class:!0,"data-svelte-h":!0}),Y(O)!=="svelte-162vzwb"&&(O.textContent=re),se=I(he),K=u(he,"DIV",{class:!0});var ye=p(K);W=L(ye,Z),ye.forEach(i),he.forEach(i),S=I(fe),X=u(fe,"DIV",{});var ve=p(X);V=u(ve,"DIV",{class:!0,"data-svelte-h":!0}),Y(V)!=="svelte-1j1nbim"&&(V.textContent=w),$=I(ve),U=u(ve,"DIV",{class:!0});var we=p(U);le=L(we,ee),we.forEach(i),ve.forEach(i),fe.forEach(i),xe.forEach(i),ge.forEach(i),ie=I(te),Q=u(te,"DIV",{class:!0});var De=p(Q);M.l(De),De.forEach(i),te.forEach(i),me.forEach(i),this.h()},h(){f(r,"class","text-3xl font-bold text-gray-900 mb-2"),f(_,"class","text-gray-600"),f(D,"href","/teacher/reviews"),f(D,"class","bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors"),f(x,"class","flex items-center space-x-4"),f(n,"class","flex items-center justify-between"),f(m,"class","mb-8"),f(O,"class","text-sm text-gray-500"),f(K,"class","text-2xl font-bold text-blue-600"),f(V,"class","text-sm text-gray-500"),f(U,"class",ae="text-lg font-semibold "+(a[2]?"text-green-600":"text-orange-600")),f(R,"class","flex items-center space-x-6"),f(N,"class","flex items-center justify-between"),f(j,"class","bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6"),f(Q,"class","bg-white rounded-xl shadow-sm border border-gray-100 p-6"),f(h,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"),f(l,"class","min-h-screen bg-gradient-to-br from-green-50 to-blue-100")},m(y,B){P(y,t,B),P(y,l,B),s(l,h),s(h,m),s(m,n),s(n,v),s(v,r),s(r,o),s(r,b),s(v,d),s(v,_),s(n,q),s(n,x),E&&E.m(x,null),s(x,F),s(x,D),s(h,G),T&&T.m(h,null),s(h,J),s(h,j),s(j,N),s(N,R),s(R,C),s(C,O),s(C,se),s(C,K),s(K,W),s(R,S),s(R,X),s(X,V),s(X,$),s(X,U),s(U,le),s(h,ie),s(h,Q),M.m(Q,null)},p(y,[B]){B&2&&e!==(e="Quiz Submissions - "+y[1])&&(document.title=e),B&2&&H(b,y[1]),!y[2]&&y[0].length>0?E?E.p(y,B):(E=Ve(y),E.c(),E.m(x,F)):E&&(E.d(1),E=null),y[4]?T?T.p(y,B):(T=Ce(y),T.c(),T.m(h,J)):T&&(T.d(1),T=null),B&1&&Z!==(Z=y[0].length+"")&&H(W,Z),B&4&&ee!==(ee=y[2]?"‚úÖ Released":"‚è≥ Pending")&&H(le,ee),B&4&&ae!==(ae="text-lg font-semibold "+(y[2]?"text-green-600":"text-orange-600"))&&f(U,"class",ae),oe===(oe=pe(y))&&M?M.p(y,B):(M.d(1),M=oe(y),M&&(M.c(),M.m(Q,null)))},i:ne,o:ne,d(y){y&&(i(t),i(l)),E&&E.d(),T&&T.d(),M.d()}}}function Ye(a,e,t){let l;ze(a,He,x=>t(9,l=x));let h=l.params.quizId,m=[],n="",v=!1,r=!1,o="",b=!1;Le(async()=>{await d()});async function d(){try{t(3,r=!0),t(4,o="");const x=localStorage.getItem("token"),F=ke.baseURL,D=await fetch(`${F}/teacher/quiz-submissions/${h}`,{headers:{Authorization:`Bearer ${x}`}});if(!D.ok)throw new Error("Failed to load submissions");const A=await D.json();t(0,m=A.submissions||[]),t(1,n=A.quiz_title||"Quiz"),t(2,v=A.results_released||!1)}catch(x){t(4,o=x.message)}finally{t(3,r=!1)}}async function _(){if(confirm("Release results to all students? They will be able to download their reports."))try{t(5,b=!0);const x=localStorage.getItem("token"),F=ke.baseURL;if(!(await fetch(`${F}/teacher/release-results/${h}`,{method:"POST",headers:{Authorization:`Bearer ${x}`}})).ok)throw new Error("Failed to release results");alert("‚úÖ Results released! Students have been notified."),await d()}catch(x){alert("‚ùå "+x.message)}finally{t(5,b=!1)}}function g(x){Pe(`/teacher/reviews/attempt/${x}`)}return[m,n,v,r,o,b,_,g,x=>g(x.attempt_id)]}class $e extends qe{constructor(e){super(),Ae(this,e,Ye,Qe,Se,{})}}export{$e as component};
