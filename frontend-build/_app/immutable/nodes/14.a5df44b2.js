import{s as Se,n as xe,c as Ae,o as Le,r as qe}from"../chunks/scheduler.27fe8299.js";import{S as Ne,i as Te,s as L,g as o,m as S,D as Be,f as i,c as q,h as n,j as c,n as A,x as se,k as a,a as oe,y as e,o as ee,J as Ve,A as ze,z as be,E as ge}from"../chunks/index.e0a53316.js";import{e as Ie}from"../chunks/each.d148e7a3.js";import"../chunks/paths.56aa7a3d.js";import{p as Pe}from"../chunks/stores.d2bbad10.js";import{d as ke}from"../chunks/api.5fae4f57.js";function we(l,t,s){const r=l.slice();return r[17]=t[s],r[19]=s,r}function Ce(l){let t,s,r,g="‚ö†Ô∏è",z,b,v;return{c(){t=o("div"),s=o("div"),r=o("div"),r.textContent=g,z=L(),b=o("div"),v=S(l[2]),this.h()},l(p){t=n(p,"DIV",{class:!0});var k=c(t);s=n(k,"DIV",{class:!0});var E=c(s);r=n(E,"DIV",{class:!0,"data-svelte-h":!0}),se(r)!=="svelte-1lytrla"&&(r.textContent=g),z=q(E),b=n(E,"DIV",{class:!0});var T=c(b);v=A(T,l[2]),T.forEach(i),E.forEach(i),k.forEach(i),this.h()},h(){a(r,"class","text-red-400"),a(b,"class","ml-3 text-red-700"),a(s,"class","flex"),a(t,"class","bg-red-50 border-l-4 border-red-400 p-4 mb-6 rounded-r-lg")},m(p,k){oe(p,t,k),e(t,s),e(s,r),e(s,z),e(s,b),e(b,v)},p(p,k){k&4&&ee(v,p[2])},d(p){p&&i(t)}}}function je(l){let t,s,r,g="Initial Score",z,b,v=l[0].initial_score+"",p,k,E=l[0].total_questions+"",T,Q,f,D,Y="Final Score",G,V,P=(l[0].final_score!==null?l[0].final_score:l[0].initial_score)+"",J,y,w=l[0].total_questions+"",_,H,N,u,te="Submitted",X,U,I=new Date(l[0].completed_at).toLocaleString()+"",j,R,B,F=Ie(l[0].answers),m=[];for(let h=0;h<F.length;h+=1)m[h]=De(we(l,F,h));return{c(){t=o("div"),s=o("div"),r=o("div"),r.textContent=g,z=L(),b=o("div"),p=S(v),k=S("/"),T=S(E),Q=L(),f=o("div"),D=o("div"),D.textContent=Y,G=L(),V=o("div"),J=S(P),y=S("/"),_=S(w),H=L(),N=o("div"),u=o("div"),u.textContent=te,X=L(),U=o("div"),j=S(I),R=L(),B=o("div");for(let h=0;h<m.length;h+=1)m[h].c();this.h()},l(h){t=n(h,"DIV",{class:!0});var x=c(t);s=n(x,"DIV",{class:!0});var d=c(s);r=n(d,"DIV",{class:!0,"data-svelte-h":!0}),se(r)!=="svelte-ov1vz6"&&(r.textContent=g),z=q(d),b=n(d,"DIV",{class:!0});var $=c(b);p=A($,v),k=A($,"/"),T=A($,E),$.forEach(i),d.forEach(i),Q=q(x),f=n(x,"DIV",{class:!0});var Z=c(f);D=n(Z,"DIV",{class:!0,"data-svelte-h":!0}),se(D)!=="svelte-1oattz2"&&(D.textContent=Y),G=q(Z),V=n(Z,"DIV",{class:!0});var M=c(V);J=A(M,P),y=A(M,"/"),_=A(M,w),M.forEach(i),Z.forEach(i),H=q(x),N=n(x,"DIV",{class:!0});var le=c(N);u=n(le,"DIV",{class:!0,"data-svelte-h":!0}),se(u)!=="svelte-1dlkmcr"&&(u.textContent=te),X=q(le),U=n(le,"DIV",{class:!0});var ae=c(U);j=A(ae,I),ae.forEach(i),le.forEach(i),x.forEach(i),R=q(h),B=n(h,"DIV",{class:!0});var K=c(B);for(let C=0;C<m.length;C+=1)m[C].l(K);K.forEach(i),this.h()},h(){a(r,"class","text-sm text-gray-600 mb-1"),a(b,"class","text-2xl font-bold text-blue-600"),a(s,"class","bg-white rounded-xl p-6 shadow-sm border border-gray-100"),a(D,"class","text-sm text-gray-600 mb-1"),a(V,"class","text-2xl font-bold text-green-600"),a(f,"class","bg-white rounded-xl p-6 shadow-sm border border-gray-100"),a(u,"class","text-sm text-gray-600 mb-1"),a(U,"class","text-sm font-medium text-gray-700"),a(N,"class","bg-white rounded-xl p-6 shadow-sm border border-gray-100"),a(t,"class","grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"),a(B,"class","space-y-6")},m(h,x){oe(h,t,x),e(t,s),e(s,r),e(s,z),e(s,b),e(b,p),e(b,k),e(b,T),e(t,Q),e(t,f),e(f,D),e(f,G),e(f,V),e(V,J),e(V,y),e(V,_),e(t,H),e(t,N),e(N,u),e(N,X),e(N,U),e(U,j),oe(h,R,x),oe(h,B,x);for(let d=0;d<m.length;d+=1)m[d]&&m[d].m(B,null)},p(h,x){if(x&1&&v!==(v=h[0].initial_score+"")&&ee(p,v),x&1&&E!==(E=h[0].total_questions+"")&&ee(T,E),x&1&&P!==(P=(h[0].final_score!==null?h[0].final_score:h[0].initial_score)+"")&&ee(J,P),x&1&&w!==(w=h[0].total_questions+"")&&ee(_,w),x&1&&I!==(I=new Date(h[0].completed_at).toLocaleString()+"")&&ee(j,I),x&1017){F=Ie(h[0].answers);let d;for(d=0;d<F.length;d+=1){const $=we(h,F,d);m[d]?m[d].p($,x):(m[d]=De($),m[d].c(),m[d].m(B,null))}for(;d<m.length;d+=1)m[d].d(1);m.length=F.length}},d(h){h&&(i(t),i(R),i(B)),ze(m,h)}}}function Fe(l){let t,s='<div class="text-4xl mb-4">‚è≥</div> <p class="text-gray-600">Loading submission...</p>';return{c(){t=o("div"),t.innerHTML=s,this.h()},l(r){t=n(r,"DIV",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-1s69pyr"&&(t.innerHTML=s),this.h()},h(){a(t,"class","bg-white rounded-xl shadow-sm p-12 text-center")},m(r,g){oe(r,t,g)},p:xe,d(r){r&&i(t)}}}function Ge(l){let t,s,r,g,z="Grading:",b,v,p,k,E=(l[17].teacher_score!==null?l[17].teacher_score:l[17].points_earned)+"",T,Q,f,D,Y,G=l[17].max_points+"",V,P,J,y,w,_="‚úèÔ∏è Edit Grade",H,N,u,te="Feedback:",X,U=(l[17].teacher_feedback||l[17].ai_feedback||"No feedback")+"",I,j,R;function B(x,d){return x[17].teacher_score!==null?He:Re}let F=B(l),m=F(l);function h(){return l[13](l[17])}return{c(){t=o("div"),s=o("div"),r=o("div"),g=o("div"),g.textContent=z,b=L(),v=o("div"),p=o("div"),k=o("span"),T=S(E),f=L(),D=o("span"),Y=S("/"),V=S(G),P=S(" points"),J=L(),m.c(),y=L(),w=o("button"),w.textContent=_,H=L(),N=o("div"),u=o("span"),u.textContent=te,X=L(),I=S(U),this.h()},l(x){t=n(x,"DIV",{class:!0});var d=c(t);s=n(d,"DIV",{class:!0});var $=c(s);r=n($,"DIV",{class:!0});var Z=c(r);g=n(Z,"DIV",{class:!0,"data-svelte-h":!0}),se(g)!=="svelte-13qal7q"&&(g.textContent=z),b=q(Z),v=n(Z,"DIV",{class:!0});var M=c(v);p=n(M,"DIV",{});var le=c(p);k=n(le,"SPAN",{class:!0});var ae=c(k);T=A(ae,E),ae.forEach(i),f=q(le),D=n(le,"SPAN",{class:!0});var K=c(D);Y=A(K,"/"),V=A(K,G),P=A(K," points"),K.forEach(i),le.forEach(i),J=q(M),m.l(M),M.forEach(i),Z.forEach(i),y=q($),w=n($,"BUTTON",{class:!0,"data-svelte-h":!0}),se(w)!=="svelte-e7dik7"&&(w.textContent=_),$.forEach(i),H=q(d),N=n(d,"DIV",{class:!0});var C=c(N);u=n(C,"SPAN",{class:!0,"data-svelte-h":!0}),se(u)!=="svelte-e3wo5d"&&(u.textContent=te),X=q(C),I=A(C,U),C.forEach(i),d.forEach(i),this.h()},h(){a(g,"class","text-sm font-semibold text-gray-700 mb-1"),a(k,"class",Q="text-lg font-bold "+(l[17].teacher_score!==null?"text-green-600":"text-blue-600")),a(D,"class","text-gray-600"),a(v,"class","flex items-center space-x-4"),a(r,"class","flex-1"),a(w,"class","bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm"),a(s,"class","flex justify-between items-start mb-3"),a(u,"class","font-semibold"),a(N,"class","text-sm text-gray-700"),a(t,"class","bg-gray-50 border border-gray-200 rounded-lg p-4")},m(x,d){oe(x,t,d),e(t,s),e(s,r),e(r,g),e(r,b),e(r,v),e(v,p),e(p,k),e(k,T),e(p,f),e(p,D),e(D,Y),e(D,V),e(D,P),e(v,J),m.m(v,null),e(s,y),e(s,w),e(t,H),e(t,N),e(N,u),e(N,X),e(N,I),j||(R=be(w,"click",h),j=!0)},p(x,d){l=x,d&1&&E!==(E=(l[17].teacher_score!==null?l[17].teacher_score:l[17].points_earned)+"")&&ee(T,E),d&1&&Q!==(Q="text-lg font-bold "+(l[17].teacher_score!==null?"text-green-600":"text-blue-600"))&&a(k,"class",Q),d&1&&G!==(G=l[17].max_points+"")&&ee(V,G),F!==(F=B(l))&&(m.d(1),m=F(l),m&&(m.c(),m.m(v,null))),d&1&&U!==(U=(l[17].teacher_feedback||l[17].ai_feedback||"No feedback")+"")&&ee(I,U)},d(x){x&&i(t),m.d(),j=!1,R()}}}function Ue(l){let t,s,r="‚úèÔ∏è Edit Grade",g,z,b,v,p,k=l[17].max_points+"",E,T,Q,f,D,Y,G,V,P,J=(l[17].teacher_score!==null?l[17].teacher_score:l[17].points_earned)+"",y,w,_=l[17].max_points+"",H,N,u,te,X=l[17].points_earned+"",U,I,j=l[17].max_points+"",R,B,F,m,h="Feedback",x,d,$,Z,M,le=l[3]?"üíæ Saving...":"üíæ Save Grade",ae,K,C,W,ce,he;function pe(){return l[12](l[17])}return{c(){t=o("div"),s=o("h4"),s.textContent=r,g=L(),z=o("div"),b=o("div"),v=o("label"),p=S("Score (0 - "),E=S(k),T=S(")"),Q=L(),f=o("input"),Y=L(),G=o("div"),V=o("label"),P=S("Current: "),y=S(J),w=S("/"),H=S(_),N=L(),u=o("div"),te=S("AI Score: "),U=S(X),I=S("/"),R=S(j),B=L(),F=o("div"),m=o("label"),m.textContent=h,x=L(),d=o("textarea"),$=L(),Z=o("div"),M=o("button"),ae=S(le),K=L(),C=o("button"),W=S("Cancel"),this.h()},l(re){t=n(re,"DIV",{class:!0});var O=c(t);s=n(O,"H4",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-cv07f7"&&(s.textContent=r),g=q(O),z=n(O,"DIV",{class:!0});var ie=c(z);b=n(ie,"DIV",{});var de=c(b);v=n(de,"LABEL",{class:!0});var ve=c(v);p=A(ve,"Score (0 - "),E=A(ve,k),T=A(ve,")"),ve.forEach(i),Q=q(de),f=n(de,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),de.forEach(i),Y=q(ie),G=n(ie,"DIV",{});var fe=c(G);V=n(fe,"LABEL",{class:!0});var ne=c(V);P=A(ne,"Current: "),y=A(ne,J),w=A(ne,"/"),H=A(ne,_),ne.forEach(i),N=q(fe),u=n(fe,"DIV",{class:!0});var ue=c(u);te=A(ue,"AI Score: "),U=A(ue,X),I=A(ue,"/"),R=A(ue,j),ue.forEach(i),fe.forEach(i),ie.forEach(i),B=q(O),F=n(O,"DIV",{class:!0});var _e=c(F);m=n(_e,"LABEL",{class:!0,"data-svelte-h":!0}),se(m)!=="svelte-1lhv24n"&&(m.textContent=h),x=q(_e),d=n(_e,"TEXTAREA",{rows:!0,class:!0,placeholder:!0}),c(d).forEach(i),_e.forEach(i),$=q(O),Z=n(O,"DIV",{class:!0});var me=c(Z);M=n(me,"BUTTON",{class:!0});var Ee=c(M);ae=A(Ee,le),Ee.forEach(i),K=q(me),C=n(me,"BUTTON",{class:!0});var ye=c(C);W=A(ye,"Cancel"),ye.forEach(i),me.forEach(i),O.forEach(i),this.h()},h(){a(s,"class","font-semibold text-gray-900 mb-3"),a(v,"class","block text-sm font-semibold text-gray-700 mb-2"),a(f,"type","number"),a(f,"min","0"),a(f,"max",D=l[17].max_points),a(f,"step","0.5"),a(f,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"),a(V,"class","block text-sm font-semibold text-gray-700 mb-2"),a(u,"class","text-sm text-gray-600"),a(z,"class","grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"),a(m,"class","block text-sm font-semibold text-gray-700 mb-2"),a(d,"rows","3"),a(d,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"),a(d,"placeholder","Add your feedback for the student..."),a(F,"class","mb-4"),a(M,"class","bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50"),M.disabled=l[3],a(C,"class","bg-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-400 transition-colors"),C.disabled=l[3],a(Z,"class","flex space-x-3"),a(t,"class","bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4")},m(re,O){oe(re,t,O),e(t,s),e(t,g),e(t,z),e(z,b),e(b,v),e(v,p),e(v,E),e(v,T),e(b,Q),e(b,f),ge(f,l[5]),e(z,Y),e(z,G),e(G,V),e(V,P),e(V,y),e(V,w),e(V,H),e(G,N),e(G,u),e(u,te),e(u,U),e(u,I),e(u,R),e(t,B),e(t,F),e(F,m),e(F,x),e(F,d),ge(d,l[6]),e(t,$),e(t,Z),e(Z,M),e(M,ae),e(Z,K),e(Z,C),e(C,W),ce||(he=[be(f,"input",l[10]),be(d,"input",l[11]),be(M,"click",pe),be(C,"click",l[8])],ce=!0)},p(re,O){l=re,O&1&&k!==(k=l[17].max_points+"")&&ee(E,k),O&1&&D!==(D=l[17].max_points)&&a(f,"max",D),O&32&&Ve(f.value)!==l[5]&&ge(f,l[5]),O&1&&J!==(J=(l[17].teacher_score!==null?l[17].teacher_score:l[17].points_earned)+"")&&ee(y,J),O&1&&_!==(_=l[17].max_points+"")&&ee(H,_),O&1&&X!==(X=l[17].points_earned+"")&&ee(U,X),O&1&&j!==(j=l[17].max_points+"")&&ee(R,j),O&64&&ge(d,l[6]),O&8&&le!==(le=l[3]?"üíæ Saving...":"üíæ Save Grade")&&ee(ae,le),O&8&&(M.disabled=l[3]),O&8&&(C.disabled=l[3])},d(re){re&&i(t),ce=!1,qe(he)}}}function Re(l){let t,s="ü§ñ AI Graded";return{c(){t=o("span"),t.textContent=s,this.h()},l(r){t=n(r,"SPAN",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-l07rpk"&&(t.textContent=s),this.h()},h(){a(t,"class","px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800")},m(r,g){oe(r,t,g)},d(r){r&&i(t)}}}function He(l){let t,s="‚úÖ Teacher Reviewed";return{c(){t=o("span"),t.textContent=s,this.h()},l(r){t=n(r,"SPAN",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-za8k0z"&&(t.textContent=s),this.h()},h(){a(t,"class","px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800")},m(r,g){oe(r,t,g)},d(r){r&&i(t)}}}function De(l){let t,s,r,g,z=l[19]+1+"",b,v,p,k=l[17].question_type.replace("_"," ").toUpperCase()+"",E,T,Q,f,D,Y="Question:",G,V,P=l[17].question_text+"",J,y,w,_,H,N="Student's Answer:",u,te,X,U=(l[17].student_answer||"No answer provided")+"",I,j,R,B,F="Correct Answer:",m,h,x,d=l[17].correct_answer+"",$,Z,M;function le(C,W){return C[4]===C[17].answer_id?Ue:Ge}let ae=le(l),K=ae(l);return{c(){t=o("div"),s=o("div"),r=o("h3"),g=S("Question "),b=S(z),v=L(),p=o("span"),E=S(k),Q=L(),f=o("div"),D=o("div"),D.textContent=Y,G=L(),V=o("div"),J=S(P),y=L(),w=o("div"),_=o("div"),H=o("div"),H.textContent=N,u=L(),te=o("div"),X=o("div"),I=S(U),j=L(),R=o("div"),B=o("div"),B.textContent=F,m=L(),h=o("div"),x=o("div"),$=S(d),Z=L(),K.c(),M=L(),this.h()},l(C){t=n(C,"DIV",{class:!0});var W=c(t);s=n(W,"DIV",{class:!0});var ce=c(s);r=n(ce,"H3",{class:!0});var he=c(r);g=A(he,"Question "),b=A(he,z),he.forEach(i),v=q(ce),p=n(ce,"SPAN",{class:!0});var pe=c(p);E=A(pe,k),pe.forEach(i),ce.forEach(i),Q=q(W),f=n(W,"DIV",{class:!0});var re=c(f);D=n(re,"DIV",{class:!0,"data-svelte-h":!0}),se(D)!=="svelte-fc1lvl"&&(D.textContent=Y),G=q(re),V=n(re,"DIV",{class:!0});var O=c(V);J=A(O,P),O.forEach(i),re.forEach(i),y=q(W),w=n(W,"DIV",{class:!0});var ie=c(w);_=n(ie,"DIV",{});var de=c(_);H=n(de,"DIV",{class:!0,"data-svelte-h":!0}),se(H)!=="svelte-11ngrww"&&(H.textContent=N),u=q(de),te=n(de,"DIV",{class:!0});var ve=c(te);X=n(ve,"DIV",{class:!0});var fe=c(X);I=A(fe,U),fe.forEach(i),ve.forEach(i),de.forEach(i),j=q(ie),R=n(ie,"DIV",{});var ne=c(R);B=n(ne,"DIV",{class:!0,"data-svelte-h":!0}),se(B)!=="svelte-jzlvl"&&(B.textContent=F),m=q(ne),h=n(ne,"DIV",{class:!0});var ue=c(h);x=n(ue,"DIV",{class:!0});var _e=c(x);$=A(_e,d),_e.forEach(i),ue.forEach(i),ne.forEach(i),ie.forEach(i),Z=q(W),K.l(W),M=q(W),W.forEach(i),this.h()},h(){a(r,"class","text-lg font-semibold text-gray-900"),a(p,"class",T="px-3 py-1 rounded-full text-xs font-medium "+(l[17].question_type==="multiple_choice"?"bg-blue-100 text-blue-800":l[17].question_type==="true_false"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800")),a(s,"class","flex justify-between items-start mb-4"),a(D,"class","text-sm font-semibold text-gray-700 mb-2"),a(V,"class","text-gray-900"),a(f,"class","mb-4"),a(H,"class","text-sm font-semibold text-gray-700 mb-2"),a(X,"class","text-gray-900"),a(te,"class","bg-blue-50 border border-blue-200 rounded-lg p-3"),a(B,"class","text-sm font-semibold text-gray-700 mb-2"),a(x,"class","text-gray-900"),a(h,"class","bg-green-50 border border-green-200 rounded-lg p-3"),a(w,"class","grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"),a(t,"class","bg-white rounded-xl shadow-sm border border-gray-100 p-6")},m(C,W){oe(C,t,W),e(t,s),e(s,r),e(r,g),e(r,b),e(s,v),e(s,p),e(p,E),e(t,Q),e(t,f),e(f,D),e(f,G),e(f,V),e(V,J),e(t,y),e(t,w),e(w,_),e(_,H),e(_,u),e(_,te),e(te,X),e(X,I),e(w,j),e(w,R),e(R,B),e(R,m),e(R,h),e(h,x),e(x,$),e(t,Z),K.m(t,null),e(t,M)},p(C,W){W&1&&k!==(k=C[17].question_type.replace("_"," ").toUpperCase()+"")&&ee(E,k),W&1&&T!==(T="px-3 py-1 rounded-full text-xs font-medium "+(C[17].question_type==="multiple_choice"?"bg-blue-100 text-blue-800":C[17].question_type==="true_false"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"))&&a(p,"class",T),W&1&&P!==(P=C[17].question_text+"")&&ee(J,P),W&1&&U!==(U=(C[17].student_answer||"No answer provided")+"")&&ee(I,U),W&1&&d!==(d=C[17].correct_answer+"")&&ee($,d),ae===(ae=le(C))&&K?K.p(C,W):(K.d(1),K=ae(C),K&&(K.c(),K.m(t,M)))},d(C){C&&i(t),K.d()}}}function Oe(l){var te,X,U;let t,s,r,g,z,b,v,p,k,E=(((te=l[0])==null?void 0:te.quiz_title)||"Loading...")+"",T,Q,f,D,Y=(((X=l[0])==null?void 0:X.student_name)||"Loading...")+"",G,V,P,J="‚Üê Back to Reviews",y,w;document.title=t="Review Submission - "+(((U=l[0])==null?void 0:U.student_name)||"Loading...");let _=l[2]&&Ce(l);function H(I,j){if(I[1])return Fe;if(I[0])return je}let N=H(l),u=N&&N(l);return{c(){s=L(),r=o("div"),g=o("div"),z=o("div"),b=o("div"),v=o("div"),p=o("h1"),k=S("üìù "),T=S(E),Q=L(),f=o("p"),D=S("Student: "),G=S(Y),V=L(),P=o("a"),P.textContent=J,y=L(),_&&_.c(),w=L(),u&&u.c(),this.h()},l(I){Be("svelte-1oiuv6s",document.head).forEach(i),s=q(I),r=n(I,"DIV",{class:!0});var R=c(r);g=n(R,"DIV",{class:!0});var B=c(g);z=n(B,"DIV",{class:!0});var F=c(z);b=n(F,"DIV",{class:!0});var m=c(b);v=n(m,"DIV",{});var h=c(v);p=n(h,"H1",{class:!0});var x=c(p);k=A(x,"üìù "),T=A(x,E),x.forEach(i),Q=q(h),f=n(h,"P",{class:!0});var d=c(f);D=A(d,"Student: "),G=A(d,Y),d.forEach(i),h.forEach(i),V=q(m),P=n(m,"A",{href:!0,class:!0,"data-svelte-h":!0}),se(P)!=="svelte-t8goyd"&&(P.textContent=J),m.forEach(i),F.forEach(i),y=q(B),_&&_.l(B),w=q(B),u&&u.l(B),B.forEach(i),R.forEach(i),this.h()},h(){a(p,"class","text-3xl font-bold text-gray-900 mb-2"),a(f,"class","text-gray-600"),a(P,"href","/teacher/reviews"),a(P,"class","bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors"),a(b,"class","flex items-center justify-between"),a(z,"class","mb-8"),a(g,"class","max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8"),a(r,"class","min-h-screen bg-gradient-to-br from-green-50 to-blue-100")},m(I,j){oe(I,s,j),oe(I,r,j),e(r,g),e(g,z),e(z,b),e(b,v),e(v,p),e(p,k),e(p,T),e(v,Q),e(v,f),e(f,D),e(f,G),e(b,V),e(b,P),e(g,y),_&&_.m(g,null),e(g,w),u&&u.m(g,null)},p(I,[j]){var R,B,F;j&1&&t!==(t="Review Submission - "+(((R=I[0])==null?void 0:R.student_name)||"Loading..."))&&(document.title=t),j&1&&E!==(E=(((B=I[0])==null?void 0:B.quiz_title)||"Loading...")+"")&&ee(T,E),j&1&&Y!==(Y=(((F=I[0])==null?void 0:F.student_name)||"Loading...")+"")&&ee(G,Y),I[2]?_?_.p(I,j):(_=Ce(I),_.c(),_.m(g,w)):_&&(_.d(1),_=null),N===(N=H(I))&&u?u.p(I,j):(u&&u.d(1),u=N&&N(I),u&&(u.c(),u.m(g,null)))},i:xe,o:xe,d(I){I&&(i(s),i(r)),_&&_.d(),u&&u.d()}}}function Me(l,t,s){let r;Ae(l,Pe,y=>s(15,r=y));let g=null,z=null,b=!1,v="",p=!1,k=null,E=0,T="";Le(async()=>{g=r.params.attemptId,await Q()});async function Q(){try{s(1,b=!0),s(2,v="");const y=localStorage.getItem("token"),w=ke.baseURL,_=await fetch(`${w}/teacher/review-submission/${g}`,{headers:{Authorization:`Bearer ${y}`}});if(!_.ok)throw new Error("Failed to load submission");s(0,z=await _.json())}catch(y){s(2,v=y.message),console.error("Load submission error:",y)}finally{s(1,b=!1)}}function f(y){s(4,k=y.answer_id),s(5,E=y.teacher_score!==null?y.teacher_score:y.points_earned),s(6,T=y.teacher_feedback||y.ai_feedback||"")}function D(){s(4,k=null),s(5,E=0),s(6,T="")}async function Y(y,w){if(E<0||E>w){alert(`Score must be between 0 and ${w}`);return}try{s(3,p=!0),s(2,v="");const _=localStorage.getItem("token"),H=ke.baseURL,N=await fetch(`${H}/teacher/grade-answer/${y}`,{method:"POST",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify({score:parseFloat(E),feedback:T.trim()})});if(!N.ok)throw new Error("Failed to save grade");const u=await N.json();alert(`‚úÖ Grade saved! New final score: ${u.final_score}`),await Q(),D()}catch(_){s(2,v=_.message),alert("‚ùå Failed to save grade: "+_.message)}finally{s(3,p=!1)}}function G(){E=Ve(this.value),s(5,E)}function V(){T=this.value,s(6,T)}return[z,b,v,p,k,E,T,f,D,Y,G,V,y=>Y(y.answer_id,y.max_points),y=>f(y)]}class Ze extends Ne{constructor(t){super(),Te(this,t,Me,Oe,Se,{})}}export{Ze as component};
