import{s as Oe,n as be,c as Fe,o as Ge}from"../chunks/scheduler.27fe8299.js";import{S as Qe,i as Je,s as k,g as c,D as Ke,f as i,c as C,h as d,j as m,x as O,k as f,a as F,y as l,z as je,m as z,n as L,o as N,A as Be}from"../chunks/index.e0a53316.js";import{g as We}from"../chunks/globals.7f7f1b26.js";import{e as xe}from"../chunks/each.d148e7a3.js";import{u as Xe,d as Ie}from"../chunks/api.5fae4f57.js";import{g as qe}from"../chunks/navigation.985c25e8.js";const{document:He}=We;function Me(r,e,s){const t=r.slice();return t[7]=e[s],t}function Pe(r,e,s){const t=r.slice();return t[10]=e[s],t}function Ye(r){let e,s,t,a="Overall Score",n,o,h=r[1].overall_percentage+"",v,p,u,x,V,S="Quizzes Completed",P,I,g=r[1].total_quizzes+"",b,w,T,q,H="Average Grade",M,A,Y=r[1].overall_percentage>=90?"A+":r[1].overall_percentage>=80?"A":r[1].overall_percentage>=70?"B":r[1].overall_percentage>=60?"C":"D",Z,j,J,Q,R,B,le="Quiz History",se,y=r[1].improvement_tips&&r[1].improvement_tips.length>0&&Ae(r);function K(_,D){return _[1].recent_quizzes&&_[1].recent_quizzes.length>0?tt:et}let re=K(r),U=re(r);return{c(){e=c("div"),s=c("div"),t=c("div"),t.textContent=a,n=k(),o=c("div"),v=z(h),p=z("%"),u=k(),x=c("div"),V=c("div"),V.textContent=S,P=k(),I=c("div"),b=z(g),w=k(),T=c("div"),q=c("div"),q.textContent=H,M=k(),A=c("div"),Z=z(Y),J=k(),y&&y.c(),Q=k(),R=c("div"),B=c("h2"),B.textContent=le,se=k(),U.c(),this.h()},l(_){e=d(_,"DIV",{class:!0});var D=m(e);s=d(D,"DIV",{class:!0});var X=m(s);t=d(X,"DIV",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1qs51v9"&&(t.textContent=a),n=C(X),o=d(X,"DIV",{class:!0});var ae=m(o);v=L(ae,h),p=L(ae,"%"),ae.forEach(i),X.forEach(i),u=C(D),x=d(D,"DIV",{class:!0});var $=m(x);V=d($,"DIV",{class:!0,"data-svelte-h":!0}),O(V)!=="svelte-1w4f0ss"&&(V.textContent=S),P=C($),I=d($,"DIV",{class:!0});var W=m(I);b=L(W,g),W.forEach(i),$.forEach(i),w=C(D),T=d(D,"DIV",{class:!0});var G=m(T);q=d(G,"DIV",{class:!0,"data-svelte-h":!0}),O(q)!=="svelte-1d5t4v4"&&(q.textContent=H),M=C(G),A=d(G,"DIV",{class:!0});var ce=m(A);Z=L(ce,Y),ce.forEach(i),G.forEach(i),D.forEach(i),J=C(_),y&&y.l(_),Q=C(_),R=d(_,"DIV",{class:!0});var ee=m(R);B=d(ee,"H2",{class:!0,"data-svelte-h":!0}),O(B)!=="svelte-1ontaek"&&(B.textContent=le),se=C(ee),U.l(ee),ee.forEach(i),this.h()},h(){f(t,"class","text-sm text-gray-600 mb-1"),f(o,"class","text-3xl font-bold text-blue-600"),f(s,"class","card"),f(V,"class","text-sm text-gray-600 mb-1"),f(I,"class","text-3xl font-bold text-green-600"),f(x,"class","card"),f(q,"class","text-sm text-gray-600 mb-1"),f(A,"class",j="text-3xl font-bold "+(r[1].overall_percentage>=70?"text-green-600":"text-yellow-600")),f(T,"class","card"),f(e,"class","grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"),f(B,"class","text-xl font-bold text-gray-900 mb-6"),f(R,"class","card")},m(_,D){F(_,e,D),l(e,s),l(s,t),l(s,n),l(s,o),l(o,v),l(o,p),l(e,u),l(e,x),l(x,V),l(x,P),l(x,I),l(I,b),l(e,w),l(e,T),l(T,q),l(T,M),l(T,A),l(A,Z),F(_,J,D),y&&y.m(_,D),F(_,Q,D),F(_,R,D),l(R,B),l(R,se),U.m(R,null)},p(_,D){D&2&&h!==(h=_[1].overall_percentage+"")&&N(v,h),D&2&&g!==(g=_[1].total_quizzes+"")&&N(b,g),D&2&&Y!==(Y=_[1].overall_percentage>=90?"A+":_[1].overall_percentage>=80?"A":_[1].overall_percentage>=70?"B":_[1].overall_percentage>=60?"C":"D")&&N(Z,Y),D&2&&j!==(j="text-3xl font-bold "+(_[1].overall_percentage>=70?"text-green-600":"text-yellow-600"))&&f(A,"class",j),_[1].improvement_tips&&_[1].improvement_tips.length>0?y?y.p(_,D):(y=Ae(_),y.c(),y.m(Q.parentNode,Q)):y&&(y.d(1),y=null),re===(re=K(_))&&U?U.p(_,D):(U.d(1),U=re(_),U&&(U.c(),U.m(R,null)))},d(_){_&&(i(e),i(J),i(Q),i(R)),y&&y.d(_),U.d()}}}function Ze(r){let e,s,t;return{c(){e=c("div"),s=c("p"),t=z(r[2]),this.h()},l(a){e=d(a,"DIV",{class:!0});var n=m(e);s=d(n,"P",{class:!0});var o=m(s);t=L(o,r[2]),o.forEach(i),n.forEach(i),this.h()},h(){f(s,"class","text-red-600"),f(e,"class","card text-center")},m(a,n){F(a,e,n),l(e,s),l(s,t)},p(a,n){n&4&&N(t,a[2])},d(a){a&&i(e)}}}function $e(r){let e,s='<div class="w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div> <p class="text-gray-600">Loading your performance data...</p>';return{c(){e=c("div"),e.innerHTML=s,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-f93eeh"&&(e.innerHTML=s),this.h()},h(){f(e,"class","text-center py-20")},m(t,a){F(t,e,a)},p:be,d(t){t&&i(e)}}}function Ae(r){let e,s,t="Tips for Improvement",a,n,o=xe(r[1].improvement_tips),h=[];for(let v=0;v<o.length;v+=1)h[v]=Ue(Pe(r,o,v));return{c(){e=c("div"),s=c("h3"),s.textContent=t,a=k(),n=c("ul");for(let v=0;v<h.length;v+=1)h[v].c();this.h()},l(v){e=d(v,"DIV",{class:!0});var p=m(e);s=d(p,"H3",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-1yrejkz"&&(s.textContent=t),a=C(p),n=d(p,"UL",{class:!0});var u=m(n);for(let x=0;x<h.length;x+=1)h[x].l(u);u.forEach(i),p.forEach(i),this.h()},h(){f(s,"class","font-bold text-gray-900 mb-3"),f(n,"class","space-y-2"),f(e,"class","card mb-8 bg-blue-50 border-l-4 border-blue-600")},m(v,p){F(v,e,p),l(e,s),l(e,a),l(e,n);for(let u=0;u<h.length;u+=1)h[u]&&h[u].m(n,null)},p(v,p){if(p&2){o=xe(v[1].improvement_tips);let u;for(u=0;u<o.length;u+=1){const x=Pe(v,o,u);h[u]?h[u].p(x,p):(h[u]=Ue(x),h[u].c(),h[u].m(n,null))}for(;u<h.length;u+=1)h[u].d(1);h.length=o.length}},d(v){v&&i(e),Be(h,v)}}}function Ue(r){let e,s,t,a,n=r[10]+"",o,h;return{c(){e=c("li"),s=c("span"),t=k(),a=c("span"),o=z(n),h=k(),this.h()},l(v){e=d(v,"LI",{class:!0});var p=m(e);s=d(p,"SPAN",{class:!0}),m(s).forEach(i),t=C(p),a=d(p,"SPAN",{});var u=m(a);o=L(u,n),u.forEach(i),h=C(p),p.forEach(i),this.h()},h(){f(s,"class","mr-2"),f(e,"class","text-gray-700 flex items-start")},m(v,p){F(v,e,p),l(e,s),l(e,t),l(e,a),l(a,o),l(e,h)},p(v,p){p&2&&n!==(n=v[10]+"")&&N(o,n)},d(v){v&&i(e)}}}function et(r){let e,s='<div class="text-4xl mb-3"></div> <p>No quizzes completed yet</p>';return{c(){e=c("div"),e.innerHTML=s,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-9yzh83"&&(e.innerHTML=s),this.h()},h(){f(e,"class","text-center py-12 text-gray-500")},m(t,a){F(t,e,a)},p:be,d(t){t&&i(e)}}}function tt(r){let e,s=xe(r[1].recent_quizzes),t=[];for(let a=0;a<s.length;a+=1)t[a]=Re(Me(r,s,a));return{c(){e=c("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=d(a,"DIV",{class:!0});var n=m(e);for(let o=0;o<t.length;o+=1)t[o].l(n);n.forEach(i),this.h()},h(){f(e,"class","space-y-4")},m(a,n){F(a,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(a,n){if(n&10){s=xe(a[1].recent_quizzes);let o;for(o=0;o<s.length;o+=1){const h=Me(a,s,o);t[o]?t[o].p(h,n):(t[o]=Re(h),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=s.length}},d(a){a&&i(e),Be(t,a)}}}function Re(r){let e,s,t,a,n=r[7].quiz_title+"",o,h,v,p=r[7].department+"",u,x,V=r[7].level+"",S,P,I,g,b=r[7].grade+"",w,T,q,H,M,A,Y="Score",Z,j,J=r[7].score+"",Q,R,B=r[7].total_questions+"",le,se,y,K,re="Percentage",U,_,D=r[7].percentage+"",X,ae,$,W,G,ce="Completed",ee,ne,de=new Date(r[7].completed_at).toLocaleDateString()+"",ve,De,te,Ee="Download Detailed Report",ye,ke,Ve;function Ne(){return r[5](r[7])}return{c(){e=c("div"),s=c("div"),t=c("div"),a=c("h3"),o=z(n),h=k(),v=c("div"),u=z(p),x=z(" - "),S=z(V),P=k(),I=c("div"),g=c("div"),w=z(b),q=k(),H=c("div"),M=c("div"),A=c("div"),A.textContent=Y,Z=k(),j=c("div"),Q=z(J),R=z("/"),le=z(B),se=k(),y=c("div"),K=c("div"),K.textContent=re,U=k(),_=c("div"),X=z(D),ae=z("%"),$=k(),W=c("div"),G=c("div"),G.textContent=ce,ee=k(),ne=c("div"),ve=z(de),De=k(),te=c("button"),te.textContent=Ee,ye=k(),this.h()},l(oe){e=d(oe,"DIV",{class:!0});var E=m(e);s=d(E,"DIV",{class:!0});var ue=m(s);t=d(ue,"DIV",{class:!0});var fe=m(t);a=d(fe,"H3",{class:!0});var we=m(a);o=L(we,n),we.forEach(i),h=C(fe),v=d(fe,"DIV",{class:!0});var he=m(v);u=L(he,p),x=L(he," - "),S=L(he,V),he.forEach(i),fe.forEach(i),P=C(ue),I=d(ue,"DIV",{class:!0});var ze=m(I);g=d(ze,"DIV",{class:!0});var Le=m(g);w=L(Le,b),Le.forEach(i),ze.forEach(i),ue.forEach(i),q=C(E),H=d(E,"DIV",{class:!0});var ie=m(H);M=d(ie,"DIV",{});var _e=m(M);A=d(_e,"DIV",{class:!0,"data-svelte-h":!0}),O(A)!=="svelte-169evmi"&&(A.textContent=Y),Z=C(_e),j=d(_e,"DIV",{class:!0});var pe=m(j);Q=L(pe,J),R=L(pe,"/"),le=L(pe,B),pe.forEach(i),_e.forEach(i),se=C(ie),y=d(ie,"DIV",{});var me=m(y);K=d(me,"DIV",{class:!0,"data-svelte-h":!0}),O(K)!=="svelte-jvtlum"&&(K.textContent=re),U=C(me),_=d(me,"DIV",{class:!0});var Ce=m(_);X=L(Ce,D),ae=L(Ce,"%"),Ce.forEach(i),me.forEach(i),$=C(ie),W=d(ie,"DIV",{});var ge=m(W);G=d(ge,"DIV",{class:!0,"data-svelte-h":!0}),O(G)!=="svelte-19eofrl"&&(G.textContent=ce),ee=C(ge),ne=d(ge,"DIV",{class:!0});var Te=m(ne);ve=L(Te,de),Te.forEach(i),ge.forEach(i),ie.forEach(i),De=C(E),te=d(E,"BUTTON",{class:!0,"data-svelte-h":!0}),O(te)!=="svelte-2dlop5"&&(te.textContent=Ee),ye=C(E),E.forEach(i),this.h()},h(){f(a,"class","font-bold text-gray-900"),f(v,"class","text-sm text-gray-600 mt-1"),f(t,"class","flex-1"),f(g,"class",T="text-2xl font-bold "+Se(r[7].grade)+" px-3 py-1 rounded-lg inline-block"),f(I,"class","text-right"),f(s,"class","flex items-center justify-between mb-3"),f(A,"class","text-xs text-gray-600"),f(j,"class","font-bold text-gray-900"),f(K,"class","text-xs text-gray-600"),f(_,"class","font-bold text-gray-900"),f(G,"class","text-xs text-gray-600"),f(ne,"class","font-bold text-gray-900"),f(H,"class","grid grid-cols-3 gap-4 mb-3"),f(te,"class","btn btn-sm btn-primary w-full"),f(e,"class","border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow")},m(oe,E){F(oe,e,E),l(e,s),l(s,t),l(t,a),l(a,o),l(t,h),l(t,v),l(v,u),l(v,x),l(v,S),l(s,P),l(s,I),l(I,g),l(g,w),l(e,q),l(e,H),l(H,M),l(M,A),l(M,Z),l(M,j),l(j,Q),l(j,R),l(j,le),l(H,se),l(H,y),l(y,K),l(y,U),l(y,_),l(_,X),l(_,ae),l(H,$),l(H,W),l(W,G),l(W,ee),l(W,ne),l(ne,ve),l(e,De),l(e,te),l(e,ye),ke||(Ve=je(te,"click",Ne),ke=!0)},p(oe,E){r=oe,E&2&&n!==(n=r[7].quiz_title+"")&&N(o,n),E&2&&p!==(p=r[7].department+"")&&N(u,p),E&2&&V!==(V=r[7].level+"")&&N(S,V),E&2&&b!==(b=r[7].grade+"")&&N(w,b),E&2&&T!==(T="text-2xl font-bold "+Se(r[7].grade)+" px-3 py-1 rounded-lg inline-block")&&f(g,"class",T),E&2&&J!==(J=r[7].score+"")&&N(Q,J),E&2&&B!==(B=r[7].total_questions+"")&&N(le,B),E&2&&D!==(D=r[7].percentage+"")&&N(X,D),E&2&&de!==(de=new Date(r[7].completed_at).toLocaleDateString()+"")&&N(ve,de)},d(oe){oe&&i(e),ke=!1,Ve()}}}function lt(r){let e,s,t,a,n,o,h='<h1 class="text-3xl font-bold text-gray-900 mb-2">My Performance</h1> <p class="text-gray-600">Track your quiz results and download detailed reports</p>',v,p,u="<span>‚Üê</span> <span>Back to Home</span>",x,V,S;function P(b,w){if(b[0])return $e;if(b[2])return Ze;if(b[1])return Ye}let I=P(r),g=I&&I(r);return{c(){e=k(),s=c("div"),t=c("div"),a=c("div"),n=c("div"),o=c("div"),o.innerHTML=h,v=k(),p=c("button"),p.innerHTML=u,x=k(),g&&g.c(),this.h()},l(b){Ke("svelte-12y471p",He.head).forEach(i),e=C(b),s=d(b,"DIV",{class:!0});var T=m(s);t=d(T,"DIV",{class:!0});var q=m(t);a=d(q,"DIV",{class:!0});var H=m(a);n=d(H,"DIV",{class:!0});var M=m(n);o=d(M,"DIV",{"data-svelte-h":!0}),O(o)!=="svelte-1kdmd32"&&(o.innerHTML=h),v=C(M),p=d(M,"BUTTON",{class:!0,"data-svelte-h":!0}),O(p)!=="svelte-1a2fss5"&&(p.innerHTML=u),M.forEach(i),H.forEach(i),x=C(q),g&&g.l(q),q.forEach(i),T.forEach(i),this.h()},h(){He.title="My Performance",f(p,"class","bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center gap-2"),f(n,"class","flex items-center justify-between"),f(a,"class","mb-8"),f(t,"class","max-w-6xl mx-auto px-6 py-8"),f(s,"class","min-h-screen bg-gray-50")},m(b,w){F(b,e,w),F(b,s,w),l(s,t),l(t,a),l(a,n),l(n,o),l(n,v),l(n,p),l(t,x),g&&g.m(t,null),V||(S=je(p,"click",r[4]),V=!0)},p(b,[w]){I===(I=P(b))&&g?g.p(b,w):(g&&g.d(1),g=I&&I(b),g&&(g.c(),g.m(t,null)))},i:be,o:be,d(b){b&&(i(e),i(s)),g&&g.d(),V=!1,S()}}}function Se(r){return r==="A+"||r==="A"?"text-green-600 bg-green-50":r==="B"||r==="C"?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50"}function st(r,e,s){let t;Fe(r,Xe,u=>s(6,t=u));let a=!0,n=null,o="";Ge(async()=>{if(!t||t.role!=="student"){qe("/");return}try{console.log(" Fetching student progress..."),s(1,n=await Ie.getStudentProgress()),console.log(" Progress data:",n),s(0,a=!1)}catch(u){console.error(" Performance page error:",u),s(2,o=u.message||"Failed to load performance data"),s(0,a=!1)}});async function h(u){try{const x=Ie.token||localStorage.getItem("token");if(!x){alert("Please login again");return}const S=`${Ie.baseURL||"http://localhost:8000"}/student-report/${u}`;console.log(" Downloading report:",S),console.log(" Token:",x?"Present":"Missing");const P=await fetch(S,{headers:{Authorization:`Bearer ${x}`}});if(console.log(" Response status:",P.status),!P.ok){const w=await P.text();throw console.error(" Error response:",w),new Error("Failed to generate report")}const I=await P.blob(),g=window.URL.createObjectURL(I),b=document.createElement("a");b.href=g,b.download=`quiz_${u}_report.pdf`,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(g),console.log(" Download complete")}catch(x){console.error(" Download error:",x),alert("Failed to download report: "+x.message)}}return[a,n,o,h,()=>qe("/"),u=>h(u.quiz_id)]}class dt extends Qe{constructor(e){super(),Je(this,e,st,lt,Oe,{})}}export{dt as component};
