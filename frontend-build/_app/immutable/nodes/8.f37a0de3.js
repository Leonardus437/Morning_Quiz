import{s as Xe,n as pe,c as qe,o as Ze,l as $e}from"../chunks/scheduler.27fe8299.js";import{S as et,i as tt,s as q,g as v,D as lt,f as b,c as S,h as g,j as I,k as f,a as D,y as h,m as P,n as O,l as ee,o as W,x as j,z as $,A as Te}from"../chunks/index.e0a53316.js";import{g as st}from"../chunks/globals.7f7f1b26.js";import{e as ie}from"../chunks/each.d148e7a3.js";import{p as nt}from"../chunks/stores.d2bbad10.js";import{g as ce}from"../chunks/navigation.985c25e8.js";import{d as ge,u as Se}from"../chunks/api.5fae4f57.js";const{document:De}=st;function xe(t,e,l){const n=t.slice();return n[54]=e[l],n[56]=l,n}function Qe(t,e,l){const n=t.slice();return n[57]=e[l],n}function Le(t,e,l){const n=t.slice();return n[57]=e[l],n}function Ve(t,e,l){const n=t.slice();return n[57]=e[l],n}function Ne(t){let e,l,n,o,i=t[11]>=3?"âŒ":"âš ï¸",s,a,d,r=t[11]>=3?"Quiz Terminated":`Warning #${t[11]}`,u,c,m,p,k,w,_,E=!t[14]&&Ae(t);return{c(){e=v("div"),l=v("div"),n=v("div"),o=v("div"),s=P(i),a=q(),d=v("h2"),u=P(r),m=q(),p=v("p"),k=P(t[13]),w=q(),E&&E.c(),this.h()},l(z){e=g(z,"DIV",{class:!0,style:!0});var C=I(e);l=g(C,"DIV",{class:!0});var Q=I(l);n=g(Q,"DIV",{class:!0});var x=I(n);o=g(x,"DIV",{class:!0});var R=I(o);s=O(R,i),R.forEach(b),a=S(x),d=g(x,"H2",{class:!0});var G=I(d);u=O(G,r),G.forEach(b),m=S(x),p=g(x,"P",{class:!0});var M=I(p);k=O(M,t[13]),M.forEach(b),w=S(x),E&&E.l(x),x.forEach(b),Q.forEach(b),C.forEach(b),this.h()},h(){f(o,"class","text-6xl mb-4"),f(d,"class",c="text-2xl font-bold mb-4 "+(t[11]>=3?"text-red-600":"text-yellow-600")),f(p,"class","text-gray-700 mb-6 leading-relaxed"),f(n,"class","text-center"),f(l,"class",_="bg-white rounded-lg p-8 max-w-md mx-4 shadow-2xl border-4 "+(t[11]>=3?"border-red-600":"border-yellow-500")),f(e,"class","fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50"),ee(e,"z-index","9999")},m(z,C){D(z,e,C),h(e,l),h(l,n),h(n,o),h(o,s),h(n,a),h(n,d),h(d,u),h(n,m),h(n,p),h(p,k),h(n,w),E&&E.m(n,null)},p(z,C){C[0]&2048&&i!==(i=z[11]>=3?"âŒ":"âš ï¸")&&W(s,i),C[0]&2048&&r!==(r=z[11]>=3?"Quiz Terminated":`Warning #${z[11]}`)&&W(u,r),C[0]&2048&&c!==(c="text-2xl font-bold mb-4 "+(z[11]>=3?"text-red-600":"text-yellow-600"))&&f(d,"class",c),C[0]&8192&&W(k,z[13]),z[14]?E&&(E.d(1),E=null):E?E.p(z,C):(E=Ae(z),E.c(),E.m(n,null)),C[0]&2048&&_!==(_="bg-white rounded-lg p-8 max-w-md mx-4 shadow-2xl border-4 "+(z[11]>=3?"border-red-600":"border-yellow-500"))&&f(l,"class",_)},d(z){z&&b(e),E&&E.d()}}}function Ae(t){let e,l="I Understand - Continue Quiz",n,o;return{c(){e=v("button"),e.textContent=l,this.h()},l(i){e=g(i,"BUTTON",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-men2lv"&&(e.textContent=l),this.h()},h(){f(e,"class","btn bg-blue-600 text-white hover:bg-blue-700 w-full")},m(i,s){D(i,e,s),n||(o=$(e,"click",t[18]),n=!0)},p:pe,d(i){i&&b(e),n=!1,o()}}}function rt(t){var ne;let e,l,n,o=((ne=t[8])==null?void 0:ne.title)+"",i,s,a,d,r=Ie(t[3])+"",u,c,m,p,k,w=t[1]+1+"",_,E,z=t[0].length+"",C,Q,x,R,G,M,N,Y,X,te,Z,le,me,fe,_e,U=t[15]&&Fe(t),se=ie(t[0]),A=[];for(let T=0;T<se.length;T+=1)A[T]=je(xe(t,se,T));function oe(T,L){return T[16]?pt:bt}let he=oe(t),K=he(t);return{c(){e=v("div"),l=v("div"),n=v("h1"),i=P(o),s=q(),a=v("div"),d=v("div"),u=P(r),m=q(),p=v("div"),k=P("Question "),_=P(w),E=P(" of "),C=P(z),Q=q(),x=v("div"),R=v("div"),G=q(),U&&U.c(),M=q(),N=v("div"),Y=v("button"),X=P("â† Previous"),Z=q(),le=v("div");for(let T=0;T<A.length;T+=1)A[T].c();me=q(),K.c(),this.h()},l(T){e=g(T,"DIV",{class:!0});var L=I(e);l=g(L,"DIV",{class:!0});var H=I(l);n=g(H,"H1",{class:!0});var F=I(n);i=O(F,o),F.forEach(b),s=S(H),a=g(H,"DIV",{class:!0});var B=I(a);d=g(B,"DIV",{class:!0});var ye=I(d);u=O(ye,r),ye.forEach(b),m=S(B),p=g(B,"DIV",{class:!0});var ue=I(p);k=O(ue,"Question "),_=O(ue,w),E=O(ue," of "),C=O(ue,z),ue.forEach(b),B.forEach(b),H.forEach(b),Q=S(L),x=g(L,"DIV",{class:!0});var de=I(x);R=g(de,"DIV",{class:!0,style:!0}),I(R).forEach(b),de.forEach(b),L.forEach(b),G=S(T),U&&U.l(T),M=S(T),N=g(T,"DIV",{class:!0});var ae=I(N);Y=g(ae,"BUTTON",{class:!0});var we=I(Y);X=O(we,"â† Previous"),we.forEach(b),Z=S(ae),le=g(ae,"DIV",{class:!0});var Ee=I(le);for(let ve=0;ve<A.length;ve+=1)A[ve].l(Ee);Ee.forEach(b),me=S(ae),K.l(ae),ae.forEach(b),this.h()},h(){f(n,"class","text-2xl font-black text-gray-900 uppercase tracking-wide"),f(d,"class",c="text-2xl font-black "+(t[3]<300?"text-red-600":"text-blue-600")),f(p,"class","text-xs font-bold text-gray-600 uppercase tracking-wide"),f(a,"class","text-right"),f(l,"class","flex items-center justify-between mb-4"),f(R,"class","h-full bg-blue-600 transition-all duration-300"),ee(R,"width",t[17]+"%"),f(x,"class","w-full bg-gray-200 h-2 overflow-hidden"),f(e,"class","bg-white shadow-lg p-6 mb-6 border-l-4 border-blue-600"),f(Y,"class","btn btn-secondary"),Y.disabled=te=t[1]===0||t[9].has(t[1]-1),f(le,"class","flex gap-2"),f(N,"class","flex items-center justify-between")},m(T,L){D(T,e,L),h(e,l),h(l,n),h(n,i),h(l,s),h(l,a),h(a,d),h(d,u),h(a,m),h(a,p),h(p,k),h(p,_),h(p,E),h(p,C),h(e,Q),h(e,x),h(x,R),D(T,G,L),U&&U.m(T,L),D(T,M,L),D(T,N,L),h(N,Y),h(Y,X),h(N,Z),h(N,le);for(let H=0;H<A.length;H+=1)A[H]&&A[H].m(le,null);h(N,me),K.m(N,null),fe||(_e=$(Y,"click",t[24]),fe=!0)},p(T,L){var H;if(L[0]&256&&o!==(o=((H=T[8])==null?void 0:H.title)+"")&&W(i,o),L[0]&8&&r!==(r=Ie(T[3])+"")&&W(u,r),L[0]&8&&c!==(c="text-2xl font-black "+(T[3]<300?"text-red-600":"text-blue-600"))&&f(d,"class",c),L[0]&2&&w!==(w=T[1]+1+"")&&W(_,w),L[0]&1&&z!==(z=T[0].length+"")&&W(C,z),L[0]&131072&&ee(R,"width",T[17]+"%"),T[15]?U?U.p(T,L):(U=Fe(T),U.c(),U.m(M.parentNode,M)):U&&(U.d(1),U=null),L[0]&514&&te!==(te=T[1]===0||T[9].has(T[1]-1))&&(Y.disabled=te),L[0]&14680583){se=ie(T[0]);let F;for(F=0;F<se.length;F+=1){const B=xe(T,se,F);A[F]?A[F].p(B,L):(A[F]=je(B),A[F].c(),A[F].m(le,null))}for(;F<A.length;F+=1)A[F].d(1);A.length=se.length}he===(he=oe(T))&&K?K.p(T,L):(K.d(1),K=he(T),K&&(K.c(),K.m(N,null)))},d(T){T&&(b(e),b(G),b(M),b(N)),U&&U.d(T),Te(A,T),K.d(),fe=!1,_e()}}}function ot(t){let e,l,n="ðŸ“",o,i,s="No Questions",a,d,r="This quiz has no questions",u,c,m="Back to Home",p,k;return{c(){e=v("div"),l=v("div"),l.textContent=n,o=q(),i=v("h2"),i.textContent=s,a=q(),d=v("p"),d.textContent=r,u=q(),c=v("button"),c.textContent=m,this.h()},l(w){e=g(w,"DIV",{class:!0});var _=I(e);l=g(_,"DIV",{class:!0,"data-svelte-h":!0}),j(l)!=="svelte-1bi5aug"&&(l.textContent=n),o=S(_),i=g(_,"H2",{class:!0,"data-svelte-h":!0}),j(i)!=="svelte-1yxzi1x"&&(i.textContent=s),a=S(_),d=g(_,"P",{class:!0,"data-svelte-h":!0}),j(d)!=="svelte-116l1jm"&&(d.textContent=r),u=S(_),c=g(_,"BUTTON",{class:!0,"data-svelte-h":!0}),j(c)!=="svelte-73moqa"&&(c.textContent=m),_.forEach(b),this.h()},h(){f(l,"class","w-16 h-16 bg-gray-50 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4"),f(i,"class","text-xl font-semibold mb-2 text-gray-900"),f(d,"class","text-gray-600 mb-6"),f(c,"class","btn btn-primary"),f(e,"class","card text-center")},m(w,_){D(w,e,_),h(e,l),h(e,o),h(e,i),h(e,a),h(e,d),h(e,u),h(e,c),p||(k=$(c,"click",t[28]),p=!0)},p:pe,d(w){w&&b(e),p=!1,k()}}}function at(t){let e,l,n,o="Back to Home",i,s;function a(u,c){return u[10]?_t:mt}let d=a(t),r=d(t);return{c(){e=v("div"),r.c(),l=q(),n=v("button"),n.textContent=o,this.h()},l(u){e=g(u,"DIV",{class:!0});var c=I(e);r.l(c),l=S(c),n=g(c,"BUTTON",{class:!0,"data-svelte-h":!0}),j(n)!=="svelte-73moqa"&&(n.textContent=o),c.forEach(b),this.h()},h(){f(n,"class","btn btn-primary"),f(e,"class","card text-center")},m(u,c){D(u,e,c),r.m(e,null),h(e,l),h(e,n),i||(s=$(n,"click",t[27]),i=!0)},p(u,c){d===(d=a(u))&&r?r.p(u,c):(r.d(1),r=d(u),r&&(r.c(),r.m(e,l)))},d(u){u&&b(e),r.d(),i=!1,s()}}}function it(t){let e,l='<div class="w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div> <p class="text-gray-600">Loading quiz...</p>';return{c(){e=v("div"),e.innerHTML=l,this.h()},l(n){e=g(n,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-bry4lt"&&(e.innerHTML=l),this.h()},h(){f(e,"class","text-center py-20")},m(n,o){D(n,e,o)},p:pe,d(n){n&&b(e)}}}function Fe(t){let e,l,n,o,i=t[1]+1+"",s,a,d,r=Ie(t[4])+"",u,c,m,p,k=t[15].question_text+"",w,_;function E(Q,x){if(Q[15].question_type==="mcq"||Q[15].question_type==="multiple_choice")return ht;if(Q[15].question_type==="true_false")return ft;if(Q[15].question_type==="short_answer"||Q[15].question_type==="essay")return ct;if(Q[15].question_type==="fill_blanks")return dt;if(Q[15].question_type==="code_analysis")return ut}let z=E(t),C=z&&z(t);return{c(){e=v("div"),l=v("div"),n=v("span"),o=P("Question "),s=P(i),a=q(),d=v("span"),u=P(r),m=q(),p=v("h2"),w=P(k),_=q(),C&&C.c(),this.h()},l(Q){e=g(Q,"DIV",{class:!0});var x=I(e);l=g(x,"DIV",{class:!0});var R=I(l);n=g(R,"SPAN",{class:!0});var G=I(n);o=O(G,"Question "),s=O(G,i),G.forEach(b),a=S(R),d=g(R,"SPAN",{class:!0});var M=I(d);u=O(M,r),M.forEach(b),R.forEach(b),m=S(x),p=g(x,"H2",{class:!0});var N=I(p);w=O(N,k),N.forEach(b),_=S(x),C&&C.l(x),x.forEach(b),this.h()},h(){f(n,"class","bg-blue-600 text-white px-4 py-2 font-bold text-sm uppercase tracking-wide"),f(d,"class",c="text-xl font-black "+(t[4]<10?"text-red-600":"text-blue-600")),f(l,"class","flex items-center justify-between mb-6"),f(p,"class","text-xl font-bold text-gray-900 mb-8 leading-relaxed"),f(e,"class","bg-white shadow-lg p-8 mb-6")},m(Q,x){D(Q,e,x),h(e,l),h(l,n),h(n,o),h(n,s),h(l,a),h(l,d),h(d,u),h(e,m),h(e,p),h(p,w),h(e,_),C&&C.m(e,null)},p(Q,x){x[0]&2&&i!==(i=Q[1]+1+"")&&W(s,i),x[0]&16&&r!==(r=Ie(Q[4])+"")&&W(u,r),x[0]&16&&c!==(c="text-xl font-black "+(Q[4]<10?"text-red-600":"text-blue-600"))&&f(d,"class",c),x[0]&32768&&k!==(k=Q[15].question_text+"")&&W(w,k),z===(z=E(Q))&&C?C.p(Q,x):(C&&C.d(1),C=z&&z(Q),C&&(C.c(),C.m(e,null)))},d(Q){Q&&b(e),C&&C.d()}}}function ut(t){let e,l,n,o=t[15].code_block&&Pe(t),i=ie(Array.isArray(t[15].options)?t[15].options:JSON.parse(t[15].options||"[]")),s=[];for(let a=0;a<i.length;a+=1)s[a]=Oe(Qe(t,i,a));return{c(){e=v("div"),o&&o.c(),l=q(),n=v("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=g(a,"DIV",{class:!0});var d=I(e);o&&o.l(d),l=S(d),n=g(d,"DIV",{class:!0});var r=I(n);for(let u=0;u<s.length;u+=1)s[u].l(r);r.forEach(b),d.forEach(b),this.h()},h(){f(n,"class","space-y-4"),f(e,"class","space-y-4")},m(a,d){D(a,e,d),o&&o.m(e,null),h(e,l),h(e,n);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(n,null)},p(a,d){if(a[15].code_block?o?o.p(a,d):(o=Pe(a),o.c(),o.m(e,l)):o&&(o.d(1),o=null),d[0]&557574){i=ie(Array.isArray(a[15].options)?a[15].options:JSON.parse(a[15].options||"[]"));let r;for(r=0;r<i.length;r+=1){const u=Qe(a,i,r);s[r]?s[r].p(u,d):(s[r]=Oe(u),s[r].c(),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}},d(a){a&&b(e),o&&o.d(),Te(s,a)}}}function dt(t){let e,l,n="ðŸ“ Fill in the blanks with appropriate answers:",o,i,s,a,d,r,u,c,m;return{c(){e=v("div"),l=v("p"),l.textContent=n,o=q(),i=v("div"),s=v("textarea"),this.h()},l(p){e=g(p,"DIV",{class:!0});var k=I(e);l=g(k,"P",{class:!0,"data-svelte-h":!0}),j(l)!=="svelte-ygmln7"&&(l.textContent=n),o=S(k),i=g(k,"DIV",{class:!0});var w=I(i);s=g(w,"TEXTAREA",{class:!0,style:!0,placeholder:!0}),I(s).forEach(b),w.forEach(b),k.forEach(b),this.h()},h(){f(l,"class","text-sm font-semibold text-gray-700 mb-4"),f(s,"class",a="w-full h-32 p-6 border-3 border-gray-400 rounded-xl resize-none shadow-lg font-serif text-base leading-8 focus:border-blue-600 focus:ring-4 focus:ring-blue-300 transition-all "+(t[9].has(t[1])?"opacity-50 bg-gray-100":"bg-white")),ee(s,"background","linear-gradient(to bottom, #fefefe 0%, #f9fafb 100%), repeating-linear-gradient(transparent, transparent 31px, #cbd5e1 31px, #cbd5e1 32px)"),ee(s,"line-height","32px"),ee(s,"padding-top","12px"),ee(s,"box-shadow","0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06), inset 0 2px 4px rgba(0, 0, 0, 0.05)"),f(s,"placeholder",d=t[9].has(t[1])?"â° Time expired":"âœï¸ Enter your answers separated by commas (e.g., answer1, answer2)..."),s.value=r=t[2][t[15].id]||"",s.disabled=u=t[9].has(t[1]),f(i,"class","max-w-3xl mx-auto"),f(e,"class","space-y-4")},m(p,k){D(p,e,k),h(e,l),h(e,o),h(e,i),h(i,s),c||(m=$(s,"input",t[32]),c=!0)},p(p,k){k[0]&514&&a!==(a="w-full h-32 p-6 border-3 border-gray-400 rounded-xl resize-none shadow-lg font-serif text-base leading-8 focus:border-blue-600 focus:ring-4 focus:ring-blue-300 transition-all "+(p[9].has(p[1])?"opacity-50 bg-gray-100":"bg-white"))&&f(s,"class",a),k[0]&514&&d!==(d=p[9].has(p[1])?"â° Time expired":"âœï¸ Enter your answers separated by commas (e.g., answer1, answer2)...")&&f(s,"placeholder",d),k[0]&32772&&r!==(r=p[2][p[15].id]||"")&&(s.value=r),k[0]&514&&u!==(u=p[9].has(p[1]))&&(s.disabled=u)},d(p){p&&b(e),c=!1,m()}}}function ct(t){let e,l,n="ðŸ“ Write your answer below:",o,i,s,a,d,r,u,c,m="ðŸ’¡ Tip: Write clearly and completely. Your answer will be reviewed by your teacher.",p,k;return{c(){e=v("div"),l=v("div"),l.textContent=n,o=q(),i=v("textarea"),u=q(),c=v("div"),c.textContent=m,this.h()},l(w){e=g(w,"DIV",{class:!0});var _=I(e);l=g(_,"DIV",{class:!0,"data-svelte-h":!0}),j(l)!=="svelte-1syzr8x"&&(l.textContent=n),o=S(_),i=g(_,"TEXTAREA",{class:!0,style:!0,placeholder:!0}),I(i).forEach(b),u=S(_),c=g(_,"DIV",{class:!0,"data-svelte-h":!0}),j(c)!=="svelte-wo32nr"&&(c.textContent=m),_.forEach(b),this.h()},h(){f(l,"class","mb-3 text-sm font-semibold text-gray-700"),f(i,"class",s="w-full h-48 p-6 border-3 border-gray-400 rounded-xl resize-none shadow-lg font-serif text-base leading-8 focus:border-blue-600 focus:ring-4 focus:ring-blue-300 transition-all "+(t[9].has(t[1])?"opacity-50 bg-gray-100":"bg-white")),ee(i,"background","linear-gradient(to bottom, #fefefe 0%, #f9fafb 100%), repeating-linear-gradient(transparent, transparent 31px, #cbd5e1 31px, #cbd5e1 32px)"),ee(i,"line-height","32px"),ee(i,"padding-top","12px"),ee(i,"box-shadow","0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06), inset 0 2px 4px rgba(0, 0, 0, 0.05)"),f(i,"placeholder",a=t[9].has(t[1])?"â° Time expired":"âœï¸ Write your answer here... (Type your response in complete sentences)"),i.value=d=t[2][t[15].id]||"",i.disabled=r=t[9].has(t[1]),f(c,"class","mt-2 text-xs text-gray-500"),f(e,"class","max-w-3xl mx-auto")},m(w,_){D(w,e,_),h(e,l),h(e,o),h(e,i),h(e,u),h(e,c),p||(k=$(i,"input",t[31]),p=!0)},p(w,_){_[0]&514&&s!==(s="w-full h-48 p-6 border-3 border-gray-400 rounded-xl resize-none shadow-lg font-serif text-base leading-8 focus:border-blue-600 focus:ring-4 focus:ring-blue-300 transition-all "+(w[9].has(w[1])?"opacity-50 bg-gray-100":"bg-white"))&&f(i,"class",s),_[0]&514&&a!==(a=w[9].has(w[1])?"â° Time expired":"âœï¸ Write your answer here... (Type your response in complete sentences)")&&f(i,"placeholder",a),_[0]&32772&&d!==(d=w[2][w[15].id]||"")&&(i.value=d),_[0]&514&&r!==(r=w[9].has(w[1]))&&(i.disabled=r)},d(w){w&&b(e),p=!1,k()}}}function ft(t){let e,l=ie(["True","False"]),n=[];for(let o=0;o<2;o+=1)n[o]=Re(Le(t,l,o));return{c(){e=v("div");for(let o=0;o<2;o+=1)n[o].c();this.h()},l(o){e=g(o,"DIV",{class:!0});var i=I(e);for(let s=0;s<2;s+=1)n[s].l(i);i.forEach(b),this.h()},h(){f(e,"class","space-y-3")},m(o,i){D(o,e,i);for(let s=0;s<2;s+=1)n[s]&&n[s].m(e,null)},p(o,i){if(i[0]&557574){l=ie(["True","False"]);let s;for(s=0;s<2;s+=1){const a=Le(o,l,s);n[s]?n[s].p(a,i):(n[s]=Re(a),n[s].c(),n[s].m(e,null))}for(;s<2;s+=1)n[s].d(1)}},d(o){o&&b(e),Te(n,o)}}}function ht(t){let e,l,n="ðŸ“‹ Select the correct answer:",o,i=ie(Array.isArray(t[15].options)?t[15].options:JSON.parse(t[15].options||"[]")),s=[];for(let a=0;a<i.length;a+=1)s[a]=Ue(Ve(t,i,a));return{c(){e=v("div"),l=v("div"),l.textContent=n,o=q();for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=g(a,"DIV",{class:!0});var d=I(e);l=g(d,"DIV",{class:!0,"data-svelte-h":!0}),j(l)!=="svelte-19zyt2n"&&(l.textContent=n),o=S(d);for(let r=0;r<s.length;r+=1)s[r].l(d);d.forEach(b),this.h()},h(){f(l,"class","mb-3 text-sm font-semibold text-gray-700"),f(e,"class","space-y-4")},m(a,d){D(a,e,d),h(e,l),h(e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(a,d){if(d[0]&557574){i=ie(Array.isArray(a[15].options)?a[15].options:JSON.parse(a[15].options||"[]"));let r;for(r=0;r<i.length;r+=1){const u=Ve(a,i,r);s[r]?s[r].p(u,d):(s[r]=Ue(u),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}},d(a){a&&b(e),Te(s,a)}}}function Pe(t){let e,l,n=t[15].code_block+"",o;return{c(){e=v("div"),l=v("pre"),o=P(n),this.h()},l(i){e=g(i,"DIV",{class:!0});var s=I(e);l=g(s,"PRE",{});var a=I(l);o=O(a,n),a.forEach(b),s.forEach(b),this.h()},h(){f(e,"class","bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm overflow-x-auto")},m(i,s){D(i,e,s),h(e,l),h(l,o)},p(i,s){s[0]&32768&&n!==(n=i[15].code_block+"")&&W(o,n)},d(i){i&&b(e)}}}function Oe(t){let e,l,n,o,i,s,a,d,r=t[57]+"",u,c,m,p,k;function w(){return t[33](t[57])}return{c(){e=v("label"),l=v("input"),a=q(),d=v("span"),u=P(r),c=q(),this.h()},l(_){e=g(_,"LABEL",{class:!0});var E=I(e);l=g(E,"INPUT",{type:!0,name:!0,class:!0}),a=S(E),d=g(E,"SPAN",{class:!0});var z=I(d);u=O(z,r),z.forEach(b),c=S(E),E.forEach(b),this.h()},h(){f(l,"type","radio"),f(l,"name",n="question-"+t[15].id),l.value=o=t[57],l.checked=i=t[2][t[15].id]===t[57],l.disabled=s=t[9].has(t[1]),f(l,"class","w-5 h-5 text-blue-600"),f(d,"class","ml-4 text-gray-900 font-medium"),f(e,"class",m="flex items-center p-5 border-2 hover:bg-blue-50 cursor-pointer transition-all "+(t[9].has(t[1])?"opacity-50 pointer-events-none":"")+" "+(t[2][t[15].id]===t[57]?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200"))},m(_,E){D(_,e,E),h(e,l),h(e,a),h(e,d),h(d,u),h(e,c),p||(k=$(l,"change",w),p=!0)},p(_,E){t=_,E[0]&32768&&n!==(n="question-"+t[15].id)&&f(l,"name",n),E[0]&32768&&o!==(o=t[57])&&(l.value=o),E[0]&32772&&i!==(i=t[2][t[15].id]===t[57])&&(l.checked=i),E[0]&514&&s!==(s=t[9].has(t[1]))&&(l.disabled=s),E[0]&32768&&r!==(r=t[57]+"")&&W(u,r),E[0]&33286&&m!==(m="flex items-center p-5 border-2 hover:bg-blue-50 cursor-pointer transition-all "+(t[9].has(t[1])?"opacity-50 pointer-events-none":"")+" "+(t[2][t[15].id]===t[57]?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200"))&&f(e,"class",m)},d(_){_&&b(e),p=!1,k()}}}function Re(t){let e,l,n,o,i,s,a,d,r,u,c,m;function p(){return t[30](t[57])}return{c(){e=v("label"),l=v("input"),s=q(),a=v("span"),d=P(t[57]),r=q(),this.h()},l(k){e=g(k,"LABEL",{class:!0});var w=I(e);l=g(w,"INPUT",{type:!0,name:!0,class:!0}),s=S(w),a=g(w,"SPAN",{class:!0});var _=I(a);d=O(_,t[57]),_.forEach(b),r=S(w),w.forEach(b),this.h()},h(){f(l,"type","radio"),f(l,"name",n="question-"+t[15].id),l.value=t[57],l.checked=o=t[2][t[15].id]===t[57],l.disabled=i=t[9].has(t[1]),f(l,"class","w-4 h-4 text-blue-600"),f(a,"class","ml-3 text-gray-900"),f(e,"class",u="flex items-center p-4 border border-gray-200 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors "+(t[9].has(t[1])?"opacity-50 pointer-events-none":"")+" "+(t[2][t[15].id]===t[57]?"border-blue-600 bg-blue-50":""))},m(k,w){D(k,e,w),h(e,l),h(e,s),h(e,a),h(a,d),h(e,r),c||(m=$(l,"change",p),c=!0)},p(k,w){t=k,w[0]&32768&&n!==(n="question-"+t[15].id)&&f(l,"name",n),w[0]&32772&&o!==(o=t[2][t[15].id]===t[57])&&(l.checked=o),w[0]&514&&i!==(i=t[9].has(t[1]))&&(l.disabled=i),w[0]&33286&&u!==(u="flex items-center p-4 border border-gray-200 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors "+(t[9].has(t[1])?"opacity-50 pointer-events-none":"")+" "+(t[2][t[15].id]===t[57]?"border-blue-600 bg-blue-50":""))&&f(e,"class",u)},d(k){k&&b(e),c=!1,m()}}}function Ue(t){let e,l,n,o,i,s,a,d,r=t[57]+"",u,c,m,p,k;function w(){return t[29](t[57])}return{c(){e=v("label"),l=v("input"),a=q(),d=v("span"),u=P(r),c=q(),this.h()},l(_){e=g(_,"LABEL",{class:!0});var E=I(e);l=g(E,"INPUT",{type:!0,name:!0,class:!0}),a=S(E),d=g(E,"SPAN",{class:!0});var z=I(d);u=O(z,r),z.forEach(b),c=S(E),E.forEach(b),this.h()},h(){f(l,"type","radio"),f(l,"name",n="question-"+t[15].id),l.value=o=t[57],l.checked=i=t[2][t[15].id]===t[57],l.disabled=s=t[9].has(t[1]),f(l,"class","w-5 h-5 text-blue-600"),f(d,"class","ml-4 text-gray-900 font-medium"),f(e,"class",m="flex items-center p-5 border-2 hover:bg-blue-50 cursor-pointer transition-all "+(t[9].has(t[1])?"opacity-50 pointer-events-none":"")+" "+(t[2][t[15].id]===t[57]?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200"))},m(_,E){D(_,e,E),h(e,l),h(e,a),h(e,d),h(d,u),h(e,c),p||(k=$(l,"change",w),p=!0)},p(_,E){t=_,E[0]&32768&&n!==(n="question-"+t[15].id)&&f(l,"name",n),E[0]&32768&&o!==(o=t[57])&&(l.value=o),E[0]&32772&&i!==(i=t[2][t[15].id]===t[57])&&(l.checked=i),E[0]&514&&s!==(s=t[9].has(t[1]))&&(l.disabled=s),E[0]&32768&&r!==(r=t[57]+"")&&W(u,r),E[0]&33286&&m!==(m="flex items-center p-5 border-2 hover:bg-blue-50 cursor-pointer transition-all "+(t[9].has(t[1])?"opacity-50 pointer-events-none":"")+" "+(t[2][t[15].id]===t[57]?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200"))&&f(e,"class",m)},d(_){_&&b(e),p=!1,k()}}}function je(t){let e,l=t[56]+1+"",n,o,i,s,a,d;function r(){return t[34](t[56])}return{c(){e=v("button"),n=P(l),o=q(),this.h()},l(u){e=g(u,"BUTTON",{class:!0});var c=I(e);n=O(c,l),o=S(c),c.forEach(b),this.h()},h(){f(e,"class",i="w-8 h-8 rounded-lg text-xs font-medium transition-colors "+(t[56]===t[1]?"bg-blue-600 text-white":t[9].has(t[56])?"bg-red-100 text-red-600":t[2][t[0][t[56]].id]?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600")),e.disabled=s=t[9].has(t[56])},m(u,c){D(u,e,c),h(e,n),h(e,o),a||(d=$(e,"click",r),a=!0)},p(u,c){t=u,c[0]&519&&i!==(i="w-8 h-8 rounded-lg text-xs font-medium transition-colors "+(t[56]===t[1]?"bg-blue-600 text-white":t[9].has(t[56])?"bg-red-100 text-red-600":t[2][t[0][t[56]].id]?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"))&&f(e,"class",i),c[0]&512&&s!==(s=t[9].has(t[56]))&&(e.disabled=s)},d(u){u&&b(e),a=!1,d()}}}function bt(t){let e,l="Next â†’",n,o;return{c(){e=v("button"),e.textContent=l,this.h()},l(i){e=g(i,"BUTTON",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-yl864k"&&(e.textContent=l),this.h()},h(){f(e,"class","btn btn-primary")},m(i,s){D(i,e,s),n||(o=$(e,"click",t[20]),n=!0)},p:pe,d(i){i&&b(e),n=!1,o()}}}function pt(t){let e,l=t[6]?"Submitting...":"Submit",n,o,i;return{c(){e=v("button"),n=P(l),this.h()},l(s){e=g(s,"BUTTON",{class:!0});var a=I(e);n=O(a,l),a.forEach(b),this.h()},h(){f(e,"class","btn bg-green-600 text-white hover:bg-green-700 active:scale-95"),e.disabled=t[6]},m(s,a){D(s,e,a),h(e,n),o||(i=$(e,"click",t[25]),o=!0)},p(s,a){a[0]&64&&l!==(l=s[6]?"Submitting...":"Submit")&&W(n,l),a[0]&64&&(e.disabled=s[6])},d(s){s&&b(e),o=!1,i()}}}function mt(t){let e,l="âŒ",n,o,i="Error",s,a,d;return{c(){e=v("div"),e.textContent=l,n=q(),o=v("h2"),o.textContent=i,s=q(),a=v("p"),d=P(t[7]),this.h()},l(r){e=g(r,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-i5zgla"&&(e.textContent=l),n=S(r),o=g(r,"H2",{class:!0,"data-svelte-h":!0}),j(o)!=="svelte-p0upt"&&(o.textContent=i),s=S(r),a=g(r,"P",{class:!0});var u=I(a);d=O(u,t[7]),u.forEach(b),this.h()},h(){f(e,"class","w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4"),f(o,"class","text-xl font-semibold mb-2 text-gray-900"),f(a,"class","text-red-600 mb-6")},m(r,u){D(r,e,u),D(r,n,u),D(r,o,u),D(r,s,u),D(r,a,u),h(a,d)},p(r,u){u[0]&128&&W(d,r[7])},d(r){r&&(b(e),b(n),b(o),b(s),b(a))}}}function _t(t){let e,l="â°",n,o,i="Quiz Time Expired",s,a,d,r,u,c="Your teacher can rebroadcast this quiz to give you another chance.";return{c(){e=v("div"),e.textContent=l,n=q(),o=v("h2"),o.textContent=i,s=q(),a=v("p"),d=P(t[7]),r=q(),u=v("p"),u.textContent=c,this.h()},l(m){e=g(m,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-13fj94x"&&(e.textContent=l),n=S(m),o=g(m,"H2",{class:!0,"data-svelte-h":!0}),j(o)!=="svelte-ffh2s"&&(o.textContent=i),s=S(m),a=g(m,"P",{class:!0});var p=I(a);d=O(p,t[7]),p.forEach(b),r=S(m),u=g(m,"P",{class:!0,"data-svelte-h":!0}),j(u)!=="svelte-1gkjyg4"&&(u.textContent=c),this.h()},h(){f(e,"class","w-16 h-16 bg-yellow-50 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-4"),f(o,"class","text-xl font-semibold mb-2 text-gray-900"),f(a,"class","text-gray-700 mb-2"),f(u,"class","text-sm text-gray-500 mb-6")},m(m,p){D(m,e,p),D(m,n,p),D(m,o,p),D(m,s,p),D(m,a,p),h(a,d),D(m,r,p),D(m,u,p)},p(m,p){p[0]&128&&W(d,m[7])},d(m){m&&(b(e),b(n),b(o),b(s),b(a),b(r),b(u))}}}function vt(t){var u;let e,l,n,o,i;De.title=e="Quiz - "+(((u=t[8])==null?void 0:u.title)||"Loading...");let s=t[12]&&Ne(t);function a(c,m){return c[5]?it:c[7]?at:c[0].length===0?ot:rt}let d=a(t),r=d(t);return{c(){l=q(),s&&s.c(),n=q(),o=v("div"),i=v("div"),r.c(),this.h()},l(c){lt("svelte-rkxo6j",De.head).forEach(b),l=S(c),s&&s.l(c),n=S(c),o=g(c,"DIV",{class:!0});var p=I(o);i=g(p,"DIV",{class:!0});var k=I(i);r.l(k),k.forEach(b),p.forEach(b),this.h()},h(){f(i,"class","max-w-4xl mx-auto px-6 py-8"),f(o,"class","min-h-screen bg-white")},m(c,m){D(c,l,m),s&&s.m(c,m),D(c,n,m),D(c,o,m),h(o,i),r.m(i,null)},p(c,m){var p;m[0]&256&&e!==(e="Quiz - "+(((p=c[8])==null?void 0:p.title)||"Loading..."))&&(De.title=e),c[12]?s?s.p(c,m):(s=Ne(c),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),d===(d=a(c))&&r?r.p(c,m):(r.d(1),r=d(c),r&&(r.c(),r.m(i,null)))},i:pe,o:pe,d(c){c&&(b(l),b(n),b(o)),s&&s.d(c),r.d()}}}function gt(){document.exitFullscreen?document.exitFullscreen().catch(()=>{}):document.webkitExitFullscreen?document.webkitExitFullscreen().catch(()=>{}):document.mozCancelFullScreen&&document.mozCancelFullScreen().catch(()=>{})}function Me(t){return t.preventDefault(),!1}function Ce(t){return t.preventDefault(),!1}function Be(t){return t.preventDefault(),!1}function yt(t){const e=[...t];for(let l=e.length-1;l>0;l--){const n=Math.floor(Math.random()*(l+1));[e[l],e[n]]=[e[n],e[l]]}return e}function Ie(t){const e=Math.floor(t/60),l=t%60;return`${e}:${l.toString().padStart(2,"0")}`}function wt(t,e,l){let n,o,i,s,a,d;qe(t,Se,y=>l(42,a=y)),qe(t,nt,y=>l(26,d=y));let r=[],u=0,c={},m=0,p=0,k=null,w=null,_=!0,E=!1,z="",C=null,Q=null,x={},R=new Set,G=null,M=!1,N=0,Y=!1,X=!1,te="",Z=!1;Ze(async()=>{le();const y=localStorage.getItem("user"),J=localStorage.getItem("token");if(y&&J)try{const V=JSON.parse(y);ge.setToken(J),Se.login(V)}catch{localStorage.removeItem("user"),localStorage.removeItem("token"),ce("/");return}if(!a){ce("/");return}const be=`quiz_${n}_${a.id}`,ke=localStorage.getItem(be);if(ke)try{const V=JSON.parse(ke);if(l(0,r=V.questions),l(2,c=V.answers),l(1,u=V.currentQuestionIndex),l(3,m=V.timeLeft),l(8,C=V.quiz),m>0)K(),L();else{l(7,z="Quiz time has expired"),l(5,_=!1);return}l(5,_=!1);return}catch{localStorage.removeItem(be)}try{const V=await ge.getQuizQuestions(n);if(V&&V.quiz_already_attempted){l(7,z=V.detail||"You have already completed this quiz."),l(5,_=!1);return}if(V&&V.quiz_ended){l(10,M=!0),l(7,z=V.detail||"Quiz has ended. Please wait for your teacher to rebroadcast."),l(5,_=!1);return}l(0,r=yt([...V]));const re=await ge.getQuizzes();if(l(8,C=re.find(ze=>ze.id===n)),C){if(C.countdown_started_at){const ze=new Date(C.countdown_started_at),Je=Math.floor((new Date-ze)/1e3),Ge=C.duration_minutes*60;l(3,m=Math.max(0,Ge-Je))}else l(3,m=C.duration_minutes*60);G=Date.now(),K(),L(),B()}l(5,_=!1)}catch(V){V.message.includes("410")||V.message.includes("expired")||V.message.includes("ended")?(l(10,M=!0),l(7,z="â° Quiz has ended. Please wait for your teacher to rebroadcast the quiz.")):l(7,z=V.message),l(5,_=!1)}}),$e(()=>{k&&clearInterval(k),w&&clearInterval(w),me()});function le(){setTimeout(()=>fe(),100),document.addEventListener("contextmenu",Me),document.addEventListener("copy",Ce),document.addEventListener("cut",Ce),document.addEventListener("paste",Be),document.addEventListener("visibilitychange",U),window.addEventListener("blur",se),document.addEventListener("fullscreenchange",A),document.addEventListener("webkitfullscreenchange",A),document.addEventListener("mozfullscreenchange",A),document.addEventListener("keydown",_e)}function me(){document.removeEventListener("contextmenu",Me),document.removeEventListener("copy",Ce),document.removeEventListener("cut",Ce),document.removeEventListener("paste",Be),document.removeEventListener("visibilitychange",U),window.removeEventListener("blur",se),document.removeEventListener("fullscreenchange",A),document.removeEventListener("webkitfullscreenchange",A),document.removeEventListener("mozfullscreenchange",A),document.removeEventListener("keydown",_e),gt()}function fe(){try{const y=document.documentElement,J=y.requestFullscreen?y.requestFullscreen():y.webkitRequestFullscreen?y.webkitRequestFullscreen():y.mozRequestFullScreen?y.mozRequestFullScreen():null;J&&J.then(()=>{Y=!0}).catch(be=>{console.log("Fullscreen not available:",be),Y=!1})}catch(y){console.log("Fullscreen error:",y),Y=!1}}function _e(y){if(Z)return;if([27,112,113,114,115,116,117,118,119,120,121,122,123,44,46,36,35,33,34,91,92,93].includes(y.keyCode))return console.log("ðŸš¨ RESTRICTED KEY DETECTED:",y.keyCode,y.key),y.preventDefault(),y.stopPropagation(),oe(`You pressed a restricted key (${y.key||"Key "+y.keyCode})`),!1;if(y.ctrlKey&&y.shiftKey&&(y.keyCode===73||y.keyCode===74))return console.log("ðŸš¨ DEVTOOLS KEY DETECTED"),y.preventDefault(),y.stopPropagation(),oe("You tried to open developer tools"),!1;if(y.ctrlKey&&y.keyCode===85)return console.log("ðŸš¨ VIEW SOURCE KEY DETECTED"),y.preventDefault(),y.stopPropagation(),oe("You tried to view page source"),!1}function U(){document.hidden&&!Z&&!E&&!_&&!X&&oe("You switched to another tab or window")}function se(){!Z&&!E&&!_&&!X&&oe("You switched to another application")}function A(){const y=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement);Y=y,!y&&!Z&&!E&&!_&&console.log("Fullscreen exited - user warned")}async function oe(y){if(console.log("âš ï¸ CHEATING ATTEMPT:",N+1,y),l(11,N++,N),N===1)l(13,te=`âš ï¸ WARNING #1: ${y}. This is your first warning. Two more violations will result in automatic quiz termination.`),l(12,X=!0),console.log("ðŸ“¢ Showing warning modal #1");else if(N===2)l(13,te=`âš ï¸ FINAL WARNING #2: ${y}. One more violation and your quiz will be automatically submitted and your teacher will be notified.`),l(12,X=!0),console.log("ðŸ“¢ Showing warning modal #2");else if(N>=3){l(13,te=`âŒ QUIZ TERMINATED: ${y}. Your quiz has been automatically submitted due to multiple cheating attempts. You will be redirected shortly.`),l(12,X=!0),l(14,Z=!0),console.log("ðŸ›‘ QUIZ TERMINATED - Showing termination modal"),console.log("ðŸ“¤ Auto-submitting quiz now..."),await de();try{console.log("ðŸ“§ Reporting to teacher..."),await ge.reportCheating({quiz_id:n,warnings:N,reason:y,auto_submitted:!0}),console.log("âœ… Teacher notified successfully")}catch(J){console.error("âŒ Failed to report cheating:",J)}setTimeout(()=>{ce(`/results/${n}?status=terminated&quiz_title=${encodeURIComponent((C==null?void 0:C.title)||"Quiz")}`)},3e3)}}function he(){Z||(l(12,X=!1),fe())}function K(){k&&clearInterval(k),k=setInterval(()=>{l(3,m--,m),m<=0&&(clearInterval(k),de()),B()},1e3)}function ne(y,J){l(2,c={...c,[y]:J}),B()}function T(){F(),u<r.length-1&&(l(1,u++,u),L(),B())}function L(){w&&clearInterval(w),l(4,p=(C==null?void 0:C.question_time_seconds)||60),Q=Date.now(),w=setInterval(()=>{l(4,p--,p),p<=0&&(clearInterval(w),H())},1e3)}function H(){R.add(u),F(),l(9,R),u<r.length-1?(l(1,u++,u),L(),B()):de()}function F(){Q&&o&&(x[o.id]=Math.floor((Date.now()-Q)/1e3))}function B(){if(!a||!C)return;const y=`quiz_${n}_${a.id}`,J={questions:r,answers:c,currentQuestionIndex:u,timeLeft:m,quiz:C,questionTimes:x};localStorage.setItem(y,JSON.stringify(J))}function ye(){if(!a)return;const y=`quiz_${n}_${a.id}`;localStorage.removeItem(y)}function ue(){R.has(u-1)||(F(),u>0&&(l(1,u--,u),L(),B()))}async function de(){if(!E){l(6,E=!0),F(),clearInterval(k),w&&clearInterval(w);try{const y=Object.keys(c).length,J=r.length,be={quiz_id:n,answers:Object.entries(c).filter(([V,re])=>re!=null&&re!=="").map(([V,re])=>({question_id:parseInt(V),answer:typeof re=="string"?re.trim():re}))};console.log(`ðŸ“Š Submitting ${y}/${J} answers`);const ke=await ge.submitQuiz(be);console.log("âœ… Quiz submitted successfully:",ke),ye(),Z?(l(12,X=!1),setTimeout(()=>{ce(`/results/${n}?status=terminated&quiz_title=${encodeURIComponent((C==null?void 0:C.title)||"Quiz")}`)},500)):ce(`/results/${n}?status=completed&quiz_title=${encodeURIComponent((C==null?void 0:C.title)||"Quiz")}`)}catch(y){console.error("âŒ Submit failed:",y),l(7,z=y.message||"Failed to submit quiz. Please try again."),l(6,E=!1)}}}const ae=()=>ce("/"),we=()=>ce("/"),Ee=y=>ne(o.id,y),ve=y=>ne(o.id,y),We=y=>ne(o.id,y.target.value),Ye=y=>ne(o.id,y.target.value),Ke=y=>ne(o.id,y),He=y=>{R.has(y)||(F(),l(1,u=y),L(),B())};return t.$$.update=()=>{t.$$.dirty[0]&67108864&&(n=parseInt(d.params.id)),t.$$.dirty[0]&3&&l(15,o=r[u]),t.$$.dirty[0]&3&&l(17,i=r.length>0?(u+1)/r.length*100:0),t.$$.dirty[0]&3&&l(16,s=u===r.length-1)},[r,u,c,m,p,_,E,z,C,R,M,N,X,te,Z,o,s,i,he,ne,T,L,F,B,ue,de,d,ae,we,Ee,ve,We,Ye,Ke,He]}class St extends et{constructor(e){super(),tt(this,e,wt,vt,Xe,{},null,[-1,-1,-1])}}export{St as component};
